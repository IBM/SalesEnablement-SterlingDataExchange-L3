{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Welcome to the IBM Sterling Data Exchange Level 3 demonstration guide! The goal of this demonstration guide is to provide IBM and Business Partner technical sellers with the knowledge and tools to perform hands-on demonstrations of IBM Sterling B2B Integrator. READ THIS BEFORE PROCEEDING To complete this activity, users MUST have an entitlement key in the IBM Entitled Registry to access IBM container software (e.g. IBM Sterling B2B Integrator). Before proceeding, verify an entitlement exists. To verify entitlement to IBM container software, open the IBM Entitlement key page here . Note, authentication to ibm.com will be required. If a screen like the image below is displayed, you will NOT be able to complete this activity. If a valid entitlement exists, a screen similar to the one below should be displayed. All IBM employees and registered Business Partners should have an entitlement key. Business Partners can learn more about their entitlements here or by speaking with their IBM representative. In addition to completing all the steps in this demonstration guide, to obtain the associated IBM Sterling Data Exchange Level 3 badge: IBM Technical Sellers must develop and record a Stand & Deliver presentation. This video is intended to simulate delivery of a \u201clive\u201d demo in front of a client \u2014 on camera. IBMers will have flexibility in defining a hypothetical client, the pain points the client has, and the goals they aspire to achieve. The recording will then cover the seller\u2019s hands-on demonstration and pitch to the client the value of the IBM solution using the environment and techniques of this lab. Specific criteria that must be demonstrated as part of the Stand & Deliver recordings is provided within the documentation that accompanies the Level 3 course in Your Learning. Business Partners must pass an accreditation quiz after completing this demonstration guide. The quiz consists of multiple choice questions, with four possible responses (and only one correct answer) for each question. Hint: keep the demonstration guide and the associated IBM Technology Zone (TechZone) environment active while completing the quiz. The quiz verifies use of the demonstration environment and not general knowledge of the offering. Before jumping to the Demonstration Overview, please read the guidance below. Reading and understanding the information will save time while completing the steps in this guide. Helpful tips for using this demonstration guide and environment Throughout the guide, images are used to help guide students through the demonstration. The following styles of highlighting are utilized in images: Action highlight box: Illustrates where to click, enter, or select an item: Path/explore highlight box: Illustrates one of two things: the path to follow to get to a specific location in the user interface areas to explore Copy to clipboard box: The text is copied to the clipboard. Click the copy icon (highlighted below) and then paste using the operating system's paste function. For example, entering Ctrl +v , Cmd +v , or right-click and select paste. Acronyms The following acronyms are used throughout this demonstration guide: - Applicability Statement 2 (AS2)) - Application programming interfaces (APIs) - Artificial Intelligence (AI) - Electronic Data Interchange (EDI) - IBM Sterling Business to Business Integrator (B2Bi) - IBM Sterling Partner Engagement Manager (PEM) - IBM Technology Zone (ITZ) - Red Hat OpenShift on IBM Cloud (ROKS) - User Interface (UI) - Virtual Machine (VM) - Yet Another Markup Language (YAML) It is now time to proceed to the Demonstration Overview.","title":"Introduction"},{"location":"#helpful-tips-for-using-this-demonstration-guide-and-environment","text":"Throughout the guide, images are used to help guide students through the demonstration. The following styles of highlighting are utilized in images: Action highlight box: Illustrates where to click, enter, or select an item: Path/explore highlight box: Illustrates one of two things: the path to follow to get to a specific location in the user interface areas to explore Copy to clipboard box: The text is copied to the clipboard. Click the copy icon (highlighted below) and then paste using the operating system's paste function. For example, entering Ctrl +v , Cmd +v , or right-click and select paste.","title":"Helpful tips for using this demonstration guide and environment"},{"location":"#acronyms","text":"The following acronyms are used throughout this demonstration guide: - Applicability Statement 2 (AS2)) - Application programming interfaces (APIs) - Artificial Intelligence (AI) - Electronic Data Interchange (EDI) - IBM Sterling Business to Business Integrator (B2Bi) - IBM Sterling Partner Engagement Manager (PEM) - IBM Technology Zone (ITZ) - Red Hat OpenShift on IBM Cloud (ROKS) - User Interface (UI) - Virtual Machine (VM) - Yet Another Markup Language (YAML) It is now time to proceed to the Demonstration Overview.","title":"Acronyms"},{"location":"ClientDemonstration/","text":"It is now time for the partners to transfer files between each other using the newly created B2Bi SFTP adapter, but first one last setup step to make the demonstration more visually exciting. In this demonstration, the FileZilla application will be used. FileZilla is a free and open-source, cross-platform FTP application, consisting of FileZilla Client and FileZilla Server. Clients are available for Windows, Linux, and macOS. Learn more about FileZilla here . If users do not already have FileZilla installed, do so now. IBM employees can download FileZilla from the Mac@IBM store. For Business Partners and IBMers on Microsoft Windows, the download links are available at the link above. If users are unable to use FileZilla, it is recommended to use the IBM Sterling File Gateway clients for both users in the scenario that follows. To avoid having to log in and out between user actions, it is recommended to use two different browsers (e.g. Chrome and Firefox) for each user or private/incognito windows for each user when accessing the IBM Sterling File Gateways. When doing a client demonstration, it is recommended to split the FileZilla and browser windows on the same screen to avoid switching back and forth during the demonstration. For this scenario, partner1 will use the IBM Sterling File Gateway clients, and partner2 will use FileZilla. Configure FileZilla for partner2 To configure FileZilla for partner2 both the File Gateway route address and port number will be needed. Return to the OpenShift web console and click on the sterling-fg-b2bi-asi-internal-route route on the Routes page. Select the Host field, right click, and click Copy . Note, the example below was captured using Firefox on MacOS. Others browser menus options may be labeled differently. Open the FileZilla application on local computer. Click the FileZilla Site Manager icon. Click the New site button. Enter B2BGateway for the New Site name and press enter. Select SFTP - Secure File Transfer Protocol on the Protocol pull-down menu. Paste the route copied in step 2 into the Host field. Enter the port number of the sterling-fg-b2bi-asi-backend-svc service in the Port field. Don't remember the port number? The port number can be found in the details of the sterling-fg-b2bi-asi-backend-svc service in the OpenShift web console. Enter partner2 in the User field and password in the Password field and click the Connect button. Check the Always trust this host, add this key to cache checkbox and click OK on the Unknown host key pop-up window. Notice the connection is established and the Remote site shows no files. At this time, it is recommended to have both FileZilla and the OpenShift web console both visible at the same time (either split on a single screen or using multiple monitors). Create or download the 2 sample files that will be transferred between partner1 and partner2. Since the templates created earlier allow for any file names to be transferred it does not matter what files are used. It is suggested to use small files so the transfers happen quickly. Feel free to download these two sample invoice files. In most browsers, select the link names below, right click on the links, and click Save link as to the local Downloads directory. SampleInvoice1.xml SampleInvoice2.xml Transfer a file from partner1 to partner2 using the IBM Sterling My File Gateway 2.0 In the OpenShift web console click the link to open the link to the sterling-fg-b2bi-asi-internal-route-myfg route. Enter partner1 in the User name field, password in the Password field, and then click Log in . Click the hamburger menu icon at top right and click Uploads . Click the / directory in left-hand panel. Click the select link in the Upload to / panel. Click the SampleInvoice1.xml file in the Downloads directory and click Open . Note Navigate to the directory where the sample invoice files were downloaded or pick another file to transfer. Do not transfer any file with confidential or personal information. The image above was captured using Firefox on MacOS, other browsers and operating system combinations may look different. Verify in the myFileGateway application that the file transferred successfully. Verify in FileZilla that partner2 received the file. Note The file size shown in IBM Sterling My File Gateway 2.0 is in kilobytes (KB) and in FileZilla the file size is displayed in bytes, but they are the same and the file transfer was successful. It is important to realize the file has been transferred to the B2Bi Gateway repository. In a production environment, partner2 would need to download the file. FileZilla is showing the contents of the data store on the gateway that partner2 has permissions to see. View the details of the file transfer in IBM Sterling My File Gateway 2.0 Click File activity under the hamburger menu icon . Click the link for the recently uploaded file: SampleInvoice1.xml . Review the events that occurred during the file transfer. Notice events FG_0503 and FG_0504 show the Passthrough channel template was used to properly route the transferred file to partner2 . For additional demonstrations, consider the following: Transfer a file from partner2 to partner1 . Verify the file transfers using the IBM Sterling File Gateway application. Transfer a file using the older version of IBM Sterling My File Gateway using the sterling-fg-b2bi-asi-internal-route-myfilegateway route found in the OpenShift web console.","title":"Client Demonstration"},{"location":"ClientDemonstration/#configure-filezilla-for-partner2","text":"To configure FileZilla for partner2 both the File Gateway route address and port number will be needed. Return to the OpenShift web console and click on the sterling-fg-b2bi-asi-internal-route route on the Routes page. Select the Host field, right click, and click Copy . Note, the example below was captured using Firefox on MacOS. Others browser menus options may be labeled differently. Open the FileZilla application on local computer. Click the FileZilla Site Manager icon. Click the New site button. Enter B2BGateway for the New Site name and press enter. Select SFTP - Secure File Transfer Protocol on the Protocol pull-down menu. Paste the route copied in step 2 into the Host field. Enter the port number of the sterling-fg-b2bi-asi-backend-svc service in the Port field. Don't remember the port number? The port number can be found in the details of the sterling-fg-b2bi-asi-backend-svc service in the OpenShift web console. Enter partner2 in the User field and password in the Password field and click the Connect button. Check the Always trust this host, add this key to cache checkbox and click OK on the Unknown host key pop-up window. Notice the connection is established and the Remote site shows no files. At this time, it is recommended to have both FileZilla and the OpenShift web console both visible at the same time (either split on a single screen or using multiple monitors). Create or download the 2 sample files that will be transferred between partner1 and partner2. Since the templates created earlier allow for any file names to be transferred it does not matter what files are used. It is suggested to use small files so the transfers happen quickly. Feel free to download these two sample invoice files. In most browsers, select the link names below, right click on the links, and click Save link as to the local Downloads directory. SampleInvoice1.xml SampleInvoice2.xml","title":"Configure FileZilla for partner2"},{"location":"ClientDemonstration/#transfer-a-file-from-partner1-to-partner2-using-the-ibm-sterling-my-file-gateway-20","text":"In the OpenShift web console click the link to open the link to the sterling-fg-b2bi-asi-internal-route-myfg route. Enter partner1 in the User name field, password in the Password field, and then click Log in . Click the hamburger menu icon at top right and click Uploads . Click the / directory in left-hand panel. Click the select link in the Upload to / panel. Click the SampleInvoice1.xml file in the Downloads directory and click Open . Note Navigate to the directory where the sample invoice files were downloaded or pick another file to transfer. Do not transfer any file with confidential or personal information. The image above was captured using Firefox on MacOS, other browsers and operating system combinations may look different. Verify in the myFileGateway application that the file transferred successfully. Verify in FileZilla that partner2 received the file. Note The file size shown in IBM Sterling My File Gateway 2.0 is in kilobytes (KB) and in FileZilla the file size is displayed in bytes, but they are the same and the file transfer was successful. It is important to realize the file has been transferred to the B2Bi Gateway repository. In a production environment, partner2 would need to download the file. FileZilla is showing the contents of the data store on the gateway that partner2 has permissions to see.","title":"Transfer a file from partner1 to partner2 using the IBM Sterling My File Gateway 2.0"},{"location":"ClientDemonstration/#view-the-details-of-the-file-transfer-in-ibm-sterling-my-file-gateway-20","text":"Click File activity under the hamburger menu icon . Click the link for the recently uploaded file: SampleInvoice1.xml . Review the events that occurred during the file transfer. Notice events FG_0503 and FG_0504 show the Passthrough channel template was used to properly route the transferred file to partner2 . For additional demonstrations, consider the following: Transfer a file from partner2 to partner1 . Verify the file transfers using the IBM Sterling File Gateway application. Transfer a file using the older version of IBM Sterling My File Gateway using the sterling-fg-b2bi-asi-internal-route-myfilegateway route found in the OpenShift web console.","title":"View the details of the file transfer in IBM Sterling My File Gateway 2.0"},{"location":"ConfigurationPart1/","text":"In this chapter, learn how to configure a Secure File Transfer Protocol (SFTP) adapter using the containerized B2Bi deployment. Open the B2Bi dashboard In the OpenShift web console, click Routes under the Network section in left-hand panel. Click the All Projects pull-down menu and click the b2bi project. Notice all the routes that are currently defined in the b2bi Project, there are 15 of them To start the setup of the SFTP adapter, launch the IBM Sterling B2Bi dashboard by clicking on the route for the sterling-fg-b2bi-asi-internal-route-dashboard route in the Location column. Do not click the Route name, rather click the Route link in the Location column of the table. If a security risk is received in the browser, accept it. In a production environment certificates would be configured for these web pages. Note: the images above are from Firefox running on MacOS. They will look different depending on browser and operating system. Hint As this is a new install, in this demonstration the default user ids and passwords will be used. To keep things simple in this demonstration, all passwords will be set to password . Not secure, but this will be a short lived demonstration environment. Enter admin in the User ID field and password in the Password field, and then click Sign In . Create a SSH Host Identity key First, a SSH Host Identity needs to be created. The Host Identity Key is a Private/Public key pair used to identify the Application SFTP Server to remote clients. Note, for this demonstration, default values will be used where possible, but production deployments may use other values depending on client requirements. Click the Deployment menu item in left-hand menu bar. Click the SSH Host Identity Key menu item in the left-hand menu bar. Click the Go! button in the Create: New Host Identity Key box. Enter demo in the Host Name: field of the \"New Host Identity Key\" form and then click the Next button. Click Finish . Click OK Wait until the completed message is received and the click the Return button. Create an SFTP adapter Next, an SFTP adapter must be created which will utilize the OpenShift service port for B2Bi. Click the Services menu item under Deployment in the left-hand menu bar. Click the Configuration menu item under Services . Enter sftp in the Service Name field and click the Go! button in the Search box. Locate the SFTP Server Adapter entry in the table and click the edit button. Review the default settings and click Next . Review the settings on the SFTP Server Adapter: Configuration form. The default SFTP Server Listen Port must be changed to the B2Bi service port configured in OpenShift. Switch back to the OpenShift web console browser window or tab and click Services under the Networking in the left-hand menu bar. Find and click the sterling-fg-b2bi-asi-backend-svc link. Locate and copy the Service Port number for adapters-1 in the Service port mapping table. Record the Service Port number, it will be used several times during this demonstration. Switch back to the B2Bi Dashboard browser window or tab. Enter or copy the recorded Service Port number into the SFTP Server Listen Port entry field and click Next . Review the default settings on the SFTP Server Adapter: Configuration: Document Storage page and click Next . Review the default settings on the SFTP Server Adapter: Add Policies page and click Next . Review the default settings on the SFTP Server Adapter: Configuration page and click Next . Review the default settings on the SFTP Server Adapter: Extractability page and click Next . Review the SFTP Server Adapter: Confirmation page and click Finish . Click Return after the new SFTP adapter has been created. Click the checkbox next to the SFTP Server Adapter to start the adapter. Click the icon next to the SFTP Server Adapter . Verify the SFTP Server Adapter is Running . Close the Adapter Information pop-up window. Click the Logout link to log out of the B2Bi dashboard . Now that the SFTP adapter is running, it time to move to the next step in the configuration of B2Bi.","title":"B2Bi Configuration Part 1"},{"location":"ConfigurationPart1/#open-the-b2bi-dashboard","text":"In the OpenShift web console, click Routes under the Network section in left-hand panel. Click the All Projects pull-down menu and click the b2bi project. Notice all the routes that are currently defined in the b2bi Project, there are 15 of them To start the setup of the SFTP adapter, launch the IBM Sterling B2Bi dashboard by clicking on the route for the sterling-fg-b2bi-asi-internal-route-dashboard route in the Location column. Do not click the Route name, rather click the Route link in the Location column of the table. If a security risk is received in the browser, accept it. In a production environment certificates would be configured for these web pages. Note: the images above are from Firefox running on MacOS. They will look different depending on browser and operating system. Hint As this is a new install, in this demonstration the default user ids and passwords will be used. To keep things simple in this demonstration, all passwords will be set to password . Not secure, but this will be a short lived demonstration environment. Enter admin in the User ID field and password in the Password field, and then click Sign In .","title":"Open the B2Bi dashboard"},{"location":"ConfigurationPart1/#create-a-ssh-host-identity-key","text":"First, a SSH Host Identity needs to be created. The Host Identity Key is a Private/Public key pair used to identify the Application SFTP Server to remote clients. Note, for this demonstration, default values will be used where possible, but production deployments may use other values depending on client requirements. Click the Deployment menu item in left-hand menu bar. Click the SSH Host Identity Key menu item in the left-hand menu bar. Click the Go! button in the Create: New Host Identity Key box. Enter demo in the Host Name: field of the \"New Host Identity Key\" form and then click the Next button. Click Finish . Click OK Wait until the completed message is received and the click the Return button.","title":"Create a SSH Host Identity key"},{"location":"ConfigurationPart1/#create-an-sftp-adapter","text":"Next, an SFTP adapter must be created which will utilize the OpenShift service port for B2Bi. Click the Services menu item under Deployment in the left-hand menu bar. Click the Configuration menu item under Services . Enter sftp in the Service Name field and click the Go! button in the Search box. Locate the SFTP Server Adapter entry in the table and click the edit button. Review the default settings and click Next . Review the settings on the SFTP Server Adapter: Configuration form. The default SFTP Server Listen Port must be changed to the B2Bi service port configured in OpenShift. Switch back to the OpenShift web console browser window or tab and click Services under the Networking in the left-hand menu bar. Find and click the sterling-fg-b2bi-asi-backend-svc link. Locate and copy the Service Port number for adapters-1 in the Service port mapping table. Record the Service Port number, it will be used several times during this demonstration. Switch back to the B2Bi Dashboard browser window or tab. Enter or copy the recorded Service Port number into the SFTP Server Listen Port entry field and click Next . Review the default settings on the SFTP Server Adapter: Configuration: Document Storage page and click Next . Review the default settings on the SFTP Server Adapter: Add Policies page and click Next . Review the default settings on the SFTP Server Adapter: Configuration page and click Next . Review the default settings on the SFTP Server Adapter: Extractability page and click Next . Review the SFTP Server Adapter: Confirmation page and click Finish . Click Return after the new SFTP adapter has been created. Click the checkbox next to the SFTP Server Adapter to start the adapter. Click the icon next to the SFTP Server Adapter . Verify the SFTP Server Adapter is Running . Close the Adapter Information pop-up window. Click the Logout link to log out of the B2Bi dashboard . Now that the SFTP adapter is running, it time to move to the next step in the configuration of B2Bi.","title":"Create an SFTP adapter"},{"location":"ConfigurationPart2/","text":"In this chapter, learn how to create a B2Bi partner community, add partners to the community, create a routing template, and create routing channels. Create a partner community Return to the OpenShift web console and click on the route link to the IBM Sterling File Gateway user interface (UI): sterling-fg-b2bi-asi-internal-route-filegateway . Enter fg_sysadmin in the User ID field, password in the Password field, and then click the Sign In button. Click the Participants pull-down menu item on top menu bar. Click Communities in the Participants menu. In the Communities pop-up window, click the add link. Enter sftp_community in the Community Name entry field and click Next . Select both the Partner Initiates Protocol Connections to Mailbox and the Partner Listens for Protocol Connections check boxes. Select the SSH/SFTP checkbox and click Next . Click Next on the Add Community: Notifications form. Click Finish to confirm the creation of the new community. Click Return on the community confirmation screen. Add partners to the partner community Next, add 2 partners to the newly created sftp_community . Click the edit link for the sftp_community on the Communities pop-up window. Under Partner , click the Add link. Enter partner1 in the Partner Name field, 10 digits in the Phone field, partner1@localhost.com in the Email Address field, and then click Next . Enter partner1 in the User Name field, password in the Password field, password in the Confirm Password field, Partner in the Given Name field, One in Surname field, and then click Next . Click partner1 is a Producer of Data and then click Next . Review the default settings on the Initiate Connections Settings screen and then click Next . Review the default settings on the PGP Settings screen and then click Next . Review the settings for partner1 and click Finish . Click Return on the Added Partner Successful screen. Repeat the Steps 13 through 20 to create a second partner named partner2 using the same settings. Click Return on the Edit Community: sftp_community screen after creating both partners. Close the Communities pop-up window. Click Partners under the Participants menu. Click the Refresh button if partner1 and partner2 do not appear in the Partners table. Create a routing template Click Templates under the Routes menu. Click the Create button at the bottom of the Routing Channel Templates page. Enter Passthrough in the Template Name field and then click Next>> . Review the Special Characters settings and then click Next>> . Add All Partners to both the Producer Groups and Consumer Groups tables. Click Next>> after adding All Partners to both groups. Review the Provisioning Facts page and then click Next>> . Review the File Operation page and then click Next>> . Click the Add button on the Producer page. Click the Producer File Type pull-down menu and select Unknown . Enter .+ in the File name pattern as regular expression field and then click Save . Setting the file pattern to the regular expression .+ allows for file names of one or more characters. Click Next>> on the Producer page. Click the Add button on the Consumer page. Click the Add button on the New Delivery Channel pop-up window. Click Unknown in the Consumer File Type pull-down menu. Enter ${ProducerFileName} in the File name format * field. ${ProducerFileName} Review the help information regarding file name formats by hovering over the File name format entry field and then click Save . Click Save on the New Delivery Channel pop-up window. Click Save on the Consumer page. Click OK on the Routing Channel Template successfully created. pop-up message. Review the settings for the new Passthrough routing channel template. Create routing channels Click the Channels option under the Routes menu. Click the Create button at bottom right to create a new Channel . Select Passthrough for the Routing Channel Template , partner1 for the Producer , and partner2 for the Consumer , and then click Save to create the new channel. Click OK on the Success pop-up window. Repeat the steps 48 through 50 to create a channel from partner2 to partner1. Click Sign Out . In the next chapter, the fun begins as the partners start to securely exchange files.","title":"B2Bi Configuration Part 2"},{"location":"ConfigurationPart2/#create-a-partner-community","text":"Return to the OpenShift web console and click on the route link to the IBM Sterling File Gateway user interface (UI): sterling-fg-b2bi-asi-internal-route-filegateway . Enter fg_sysadmin in the User ID field, password in the Password field, and then click the Sign In button. Click the Participants pull-down menu item on top menu bar. Click Communities in the Participants menu. In the Communities pop-up window, click the add link. Enter sftp_community in the Community Name entry field and click Next . Select both the Partner Initiates Protocol Connections to Mailbox and the Partner Listens for Protocol Connections check boxes. Select the SSH/SFTP checkbox and click Next . Click Next on the Add Community: Notifications form. Click Finish to confirm the creation of the new community. Click Return on the community confirmation screen.","title":"Create a partner community"},{"location":"ConfigurationPart2/#add-partners-to-the-partner-community","text":"Next, add 2 partners to the newly created sftp_community . Click the edit link for the sftp_community on the Communities pop-up window. Under Partner , click the Add link. Enter partner1 in the Partner Name field, 10 digits in the Phone field, partner1@localhost.com in the Email Address field, and then click Next . Enter partner1 in the User Name field, password in the Password field, password in the Confirm Password field, Partner in the Given Name field, One in Surname field, and then click Next . Click partner1 is a Producer of Data and then click Next . Review the default settings on the Initiate Connections Settings screen and then click Next . Review the default settings on the PGP Settings screen and then click Next . Review the settings for partner1 and click Finish . Click Return on the Added Partner Successful screen. Repeat the Steps 13 through 20 to create a second partner named partner2 using the same settings. Click Return on the Edit Community: sftp_community screen after creating both partners. Close the Communities pop-up window. Click Partners under the Participants menu. Click the Refresh button if partner1 and partner2 do not appear in the Partners table.","title":"Add partners to the partner community"},{"location":"ConfigurationPart2/#create-a-routing-template","text":"Click Templates under the Routes menu. Click the Create button at the bottom of the Routing Channel Templates page. Enter Passthrough in the Template Name field and then click Next>> . Review the Special Characters settings and then click Next>> . Add All Partners to both the Producer Groups and Consumer Groups tables. Click Next>> after adding All Partners to both groups. Review the Provisioning Facts page and then click Next>> . Review the File Operation page and then click Next>> . Click the Add button on the Producer page. Click the Producer File Type pull-down menu and select Unknown . Enter .+ in the File name pattern as regular expression field and then click Save . Setting the file pattern to the regular expression .+ allows for file names of one or more characters. Click Next>> on the Producer page. Click the Add button on the Consumer page. Click the Add button on the New Delivery Channel pop-up window. Click Unknown in the Consumer File Type pull-down menu. Enter ${ProducerFileName} in the File name format * field. ${ProducerFileName} Review the help information regarding file name formats by hovering over the File name format entry field and then click Save . Click Save on the New Delivery Channel pop-up window. Click Save on the Consumer page. Click OK on the Routing Channel Template successfully created. pop-up message. Review the settings for the new Passthrough routing channel template.","title":"Create a routing template"},{"location":"ConfigurationPart2/#create-routing-channels","text":"Click the Channels option under the Routes menu. Click the Create button at bottom right to create a new Channel . Select Passthrough for the Routing Channel Template , partner1 for the Producer , and partner2 for the Consumer , and then click Save to create the new channel. Click OK on the Success pop-up window. Repeat the steps 48 through 50 to create a channel from partner2 to partner1. Click Sign Out . In the next chapter, the fun begins as the partners start to securely exchange files.","title":"Create routing channels"},{"location":"DemoPreparation-CloudShell/","text":"This demonstration guide assumes a Custom ROKS envirnment provisioned from IBM Technology Zone (ITZ) here . At this point, all users should have completed the steps in the IBM Sterling Data Exchange Level 3 learning plan to reserve the Red Hat OpenShift on IBM Cloud environment as described in the IBM Sterling Data Exchange Level 3 Introduction video . Before proceeding, validate that the reservation has been fully provisioned and is in the Ready state in ITZ. If not, please complete those steps before proceeding. The following steps must be performed before delivering the demonstration. These steps should be performed well in advance of starting an actual client demonstration as it will take approximately 90 minutes for all steps to complete. Accept invitation to join the ITZ IBM Cloud account for the Custom ROKS reservation Open the You are invited to join an account in IBM Cloud email received from IBM Cloud and click the Join now link. In the browser window that opens, click the Join Account button. Follow the steps to login to IBM Cloud. On the IBM Cloud Dashboard set the current account to 2112072 - ITZ - V2 . Not seeing 2112072 - ITZ - V2? It is possible ITZ provisioned the OpenShift cluster in a different IBM Cloud account. Select the account specified in the ITZ reservation. Access the OpenShift web console Click the OpenShift icon in the left-hand menu bar. Click Clusters . Click the OpenShift cluster name in the table. Note: the cluster name will be different than seen in the above image. Click the OpenShift web console button. At this time, a page like the one below should open in a new browser window or tab. Leave this browser window open. It will be used again later. Retrieve the B2Bi installation scripts In this part of the demonstration, you will use the IBM Cloud Shell. If you are not familiar with IBM Cloud Shell, you can learn about it here . Tip Use the copy capability of the demonstration guide to copy and paste commands to the IBM Cloud Command Shell to avoid typing errors. In the IBM Cloud Portal, with the demonstration account selected ( 2112072 - ITZ - V2 ), click the IBM Cloud Shell icon. The IBM Cloud Shell will open in a new browser tab or window. It may take a few seconds for the shell to initialize. Create a new directory for the B2Bi installation scripts. mkdir b2bi Set the PROJECT_DIR environment variable. export PROJECT_DIR=$HOME/b2bi Change directories to PROJECT_DIR . cd $PROJECT_DIR Download the B2Bi installation script. wget -O rapid-lab-b2bi-newdb-61051.zip https://github.com/IBM/SalesEnablement-SterlingDataExchange-L3/blob/main/tools/rapid-lab-b2bi-newdb-61051-CloudShell.zip?raw=true Example output --2022-10-18 20:12:56-- https://github.com/IBM/SalesEnablement-SterlingDataExchange-L3/blob/main/tools/rapid-lab-b2bi-newdb-61051.zip?raw=true Resolving github.com (github.com)... 140.82.113.4 Connecting to github.com (github.com)|140.82.113.4|:443... connected. HTTP request sent, awaiting response... 302 Found Location: https://github.com/IBM/SalesEnablement-SterlingDataExchange-L3/raw/main/tools/rapid-lab-b2bi-newdb-61051.zip [following] --2022-10-18 20:12:56-- https://github.com/IBM/SalesEnablement-SterlingDataExchange-L3/raw/main/tools/rapid-lab-b2bi-newdb-61051.zip Reusing existing connection to github.com:443. HTTP request sent, awaiting response... 302 Found Location: https://raw.githubusercontent.com/IBM/SalesEnablement-SterlingDataExchange-L3/main/tools/rapid-lab-b2bi-newdb-61051.zip [following] --2022-10-18 20:12:57-- https://raw.githubusercontent.com/IBM/SalesEnablement-SterlingDataExchange-L3/main/tools/rapid-lab-b2bi-newdb-61051.zip Resolving raw.githubusercontent.com (raw.githubusercontent.com)... 185.199.110.133, 185.199.111.133, 185.199.108.133, ... Connecting to raw.githubusercontent.com (raw.githubusercontent.com)|185.199.110.133|:443... connected. HTTP request sent, awaiting response... 200 OK Length: 4061226 (3.9M) [application/zip] Saving to: \u2018rapid-lab-b2bi-newlab-61051.zip\u2019 rapid-lab-b2bi-newlab-61051.zip 100%[=========================================================================================================================================>] 3.87M --.-KB/s in 0.03s 2022-10-18 20:12:57 (147 MB/s) - \u2018rapid-lab-b2bi-newlab-61051.zip\u2019 saved [4061226/4061226] Unzip the installation script. unzip rapid-lab-b2bi-newdb-61051-CloudShell.zip Example output Archive: rapid-lab-b2bi-newdb-61051-CloudShell.zip inflating: deploy_mq.sh inflating: edited-values.yaml inflating: prepare_db2.sh inflating: deploy_db2.sh inflating: README.md inflating: COPYING inflating: env.sh inflating: deploy_b2bi.sh inflating: db2jcc4.jar Authenticate to the OpenShift cluster For the next steps, the OpenShift login command to authenticate to the OpenShift cluster must be retrieved an executed. Switch to the OpenShift web console browser window or tab. Click the IAM identity drop-down menu at top left of the OpenShift web console and click the Copy login command option. Click the Display Token link. Copy and paste the string in the Log in with this token field. Switch back to the IBM Cloud Shell browser window or tab from earlier. Paste the oc login command line copied in step 29 into the IBM Cloud Shell window and press enter. Example output itzuser@itz-2700039nft-srv4:~/b2bi$ oc login --token=sha256~XXXXXXXXXXXXXXXXXX --server=https://c103-e.us-south.containers.cloud.ibm.com:31501 Logged into \"https://c103-e.us-south.containers.cloud.ibm.com:31501\" as \"IAM#andrew@jones-tx.com\" using the token provided. You have access to 66 projects, the list has been suppressed. You can list all projects with 'oc projects' Using project \"default\". Welcome! See 'oc help' to get started. itzuser@itz-2700039nft-srv4:~/b2bi$ Install DB2 in the OpenShift cluster Run the environment setup and DB2 deploy scripts. . env.sh ; ./deploy_db2.sh Example output Now using project \"db2\" on server \"https://c109-e.us-east.containers.cloud.ibm.com:30720\". You can add applications to this project with the 'new-app' command. For example, try: oc new-app rails-postgresql-example to build a new example application in Ruby. Or use kubectl to deploy a simple Kubernetes application: kubectl create deployment hello-node --image=k8s.gcr.io/e2e-test-images/agnhost:2.33 -- /agnhost serve-hostname serviceaccount/db2 created clusterrole.rbac.authorization.k8s.io/system:openshift:scc:privileged added: \"db2\" secret/db2-secret created service/db2-ci created service/db2-lb created statefulset.apps/db2 created Wait 5 minutes... Wait approximately 5 minutes for the DB2 containers to start loading in OpenShift before executing the next step. Optional: monitor events in OpenShift web console Use the OpenShift web console to monitor the DB2 project events and pod creation. Verify DB2 is up and running in the OpenShift cluster. oc logs -f ${DB2_NAME}-0 Failure If no output is seen from the above command, or if it returns the following message: Error from server (BadRequest): container \"db2\" in pod \"db2-0\" is waiting to start: ContainerCreating wait and rerun oc logs -f ${DB2_NAME}-0 until the output starts steaming as shown in the example output below. Example output (*) Previous setup has not been detected. Creating the users... (*) Creating users ... (*) Creating instance ... DB2 installation is being initialized. Total number of tasks to be performed: 4 Total estimated time for all tasks to be performed: 309 second(s) Task #1 start Description: Setting default global profile registry variables Task #1 end Task #2 start Description: Initializing instance list Estimated time 5 second(s) Task #2 end Task #3 start Description: Configuring DB2 instances Estimated time 300 second(s) Task #3 end Task #4 start Description: Updating global profile registry Estimated time 3 second(s) Task #4 end ... **Long output - truncated in this example** ... 2022-10-18-16.44.43.180954+000 I33681E386 LEVEL: Warning PID : 15858 TID : 139996146354048 PROC : db2start INSTANCE: db2inst1 NODE : 000 HOSTNAME: db2-0 FUNCTION: DB2 UDB, base sys utilities, sqleReleaseStStLockFile, probe:16078 MESSAGE : Released lock on the file: DATA #1 : String, 50 bytes /database/config/db2inst1/sqllib/ctrl/db2strst.lck Do not proceed until... Do not proceed to the next step until the following line appears in the output: /database/config/db2inst1/sqllib/ctrl/db2strst.lck Stop the oc logs command by entering Ctrl +c on the keyboard. Example output ... FUNCTION: DB2 UDB, base sys utilities, sqleReleaseStStLockFile, probe:16078 MESSAGE : Released lock on the file: DATA #1 : String, 50 bytes /database/config/db2inst1/sqllib/ctrl/db2strst.lck ^C itzuser@itz-2700039nft-srv4:~/b2bi$ Configure DB2 and created the required B2Bi tables Prepare the DB2 instance running in OpenShift. ./prepare_db2.sh This script does not generate output. Remotely connect to the DB2 container running in OpenShift. oc rsh pod/${DB2_NAME}-0 su - db2inst1 Example output Last login: Tue Oct 18 20:47:33 UTC 2022 [db2inst1@db2-0 ~]$ A remote connection is now open to the DB2 container running in OpenShift as shown by the change in the command prompt to: [db2inst1@db2-0 ~]$ Run the db2reg.sh script. ./db2reg.sh Example output DB20000I The UPDATE DATABASE MANAGER CONFIGURATION command completed successfully. DB20000I The UPDATE DATABASE MANAGER CONFIGURATION command completed successfully. DB20000I The UPDATE DATABASE MANAGER CONFIGURATION command completed successfully. DB20000I The UPDATE DATABASE MANAGER CONFIGURATION command completed successfully. DB20000I The UPDATE DATABASE MANAGER CONFIGURATION command completed successfully. DB20000I The UPDATE DATABASE MANAGER CONFIGURATION command completed successfully. DB20000I The UPDATE DATABASE MANAGER CONFIGURATION command completed successfully. DB20000I The UPDATE DATABASE MANAGER CONFIGURATION command completed successfully. Create the B2Bi tables in DB2. db2 -stvf create_scc_db_b2bidb.sql This will take ~5 minutes This command will take approximately 5 minutes to complete. Example output CREATE DATABASE B2BIDB AUTOMATIC STORAGE YES USING CODESET UTF-8 TERRITORY US COLLATE USING IDENTITY PAGESIZE 4096 DFT_EXTENT_SZ 32 DB20000I The CREATE DATABASE command completed successfully. CONNECT TO B2BIDB Database Connection Information Database server = DB2/LINUXX8664 11.5.5.1 SQL authorization ID = DB2INST1 Local database alias = B2BIDB UPDATE DATABASE CONFIG USING STMT_CONC LITERALS DB20000I The UPDATE DATABASE CONFIGURATION command completed successfully. ... Long output - truncated in this example ... CREATE USER TEMPORARY TABLESPACE UTEMP4KTS IN DATABASE PARTITION GROUP IBMDEFAULTGROUP PAGESIZE 4 K MANAGED BY AUTOMATIC STORAGE EXTENTSIZE 32 BUFFERPOOL UTEMP4KBP FILE SYSTEM CACHING DB20000I The SQL command completed successfully. CONNECT RESET DB20000I The SQL command completed successfully. Run the final DB2 update script. ./db2-update.sh Example output Database Connection Information Database server = DB2/LINUXX8664 11.5.5.1 SQL authorization ID = DB2INST1 Local database alias = B2BIDB DB20000I The SQL command completed successfully. DB20000I The TERMINATE command completed successfully. DB20000I The FORCE APPLICATION command completed successfully. DB21024I This command is asynchronous and may not be effective immediately. DB20000I The DEACTIVATE DATABASE command completed successfully. 10/18/2022 16:53:39 0 0 SQL1064N DB2STOP processing was successful. SQL1064N DB2STOP processing was successful. 10/18/2022 16:53:41 0 0 SQL1063N DB2START processing was successful. SQL1063N DB2START processing was successful. Exit the connection to the DB2 container in OpenShift. exit Example output logout itzuser@itz-2700039nft-srv4:~/b2bi$ Notice the command line prompt has changed back to the prompt for the VSI connection. Install MQ in the OpenShift cluster Deploy MQ to OpenShift. ./deploy_mq.sh Example output Now using project \"mq\" on server \"https://c109-e.us-east.containers.cloud.ibm.com:30720\". You can add applications to this project with the 'new-app' command. For example, try: oc new-app rails-postgresql-example to build a new example application in Ruby. Or use kubectl to deploy a simple Kubernetes application: kubectl create deployment hello-node --image=k8s.gcr.io/e2e-test-images/agnhost:2.33 -- /agnhost serve-hostname serviceaccount/mq created clusterrole.rbac.authorization.k8s.io/system:openshift:scc:privileged added: \"mq\" service/mq-data created service/mq-web created W1018 16:54:39.757566 34060 shim_kubectl.go:58] Using non-groupfied API resources is deprecated and will be removed in a future release, update apiVersion to \"route.openshift.io/v1\" for your resource route.route.openshift.io/mq-web created secret/mq-secret created statefulset.apps/mq created Update the environment variables with IBM container entitlement key and e-mail address The next steps require editing of a file using the vi editor. If you are not familiar with the vi editor, it is strongly recommend to watch the following video before proceeding. There is no audio for this video. Open the vi editor. vi env.sh Open the IBM Entitlement key page here . Note, re-authentication to ibm.com may be required. If an entitlement key does not already exist, click Add new key . Click the Copy button. Return to the IBM Cloud Shell window, use the arrow keys to move the cursor between the quotes in the export APIKEY line, press i to enter input mode, and paste the copied entitlement key between the quotes. Press the esc key to exit input mode. Arrow key down and over to between the quotes in the export EMAIL=\"\" line and enter a your e-mail address. Press the esc key to exit input mode. Enter your e-mail address between the quotes on the export EMAIL=\"\" line. Press the : key and then the x key and enter to save and exit the vi editor. Verify the env.sh file looks like the example output below. cat env.sh Example output itzuser@itz-2700039nft-srv4:~/b2bi$ cat env.sh #!/usr/bin/bash ## Locate your APIKEY (Entitlement Key For Container Software) ## here: https://myibm.ibm.com/products-services/containerlibrary ## Requires IBM ID and permission. export PROJECT_NAME=\"b2bi\" export PROJECT_DIR=\"$HOME/b2bi\" export DB2_NAME=\"db2\" export MQ_NAME=\"mq\" export APIKEY=\"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\" export EMAIL=\"andrew@jones-tx.com\" itzuser@itz-2700039nft-srv4:~/b2bi$ Install B2Bi in the OpenShift cluster Deploy the B2Bi related containers on OpenShift. ./deploy_b2bi.sh This will take approximately 10 minutes This command will take approximately 10 minutes to complete. Optional: monitor events in the OpenShift web console Use the OpenShift web console to monitor the b2bi project events and pod creation. Example output Now using project \"b2bi\" on server \"https://c103-e.us-south.containers.cloud.ibm.com:31501\". You can add applications to this project with the 'new-app' command. For example, try: oc new-app rails-postgresql-example to build a new example application in Ruby. Or use kubectl to deploy a simple Kubernetes application: kubectl create deployment hello-node --image=k8s.gcr.io/e2e-test-images/agnhost:2.33 -- /agnhost serve-hostname persistentvolumeclaim/ibm-cloud-file-nfs-storage-pvc created clusterrole.rbac.authorization.k8s.io/system:openshift:scc:anyuid added: \"default\" deployment.apps/ibm-cloud-file-nfs-storage-pod created Defaulted container \"ibm-cloud-file-nfs-storage-pod\" out of: ibm-cloud-file-nfs-storage-pod, permissionsfix (init) ... Long output - truncated in this example ... Set environment variables for final install step. export DB2_IP=$(oc get svc db2-ci -n ${DB2_NAME} -o jsonpath='{.spec.clusterIP}') export MQ_IP=$(oc get svc mq-data -n ${MQ_NAME} -o jsonpath='{.spec.clusterIP}') export INGRESS_SUBDOMAIN=$(oc get IngressController default -n openshift-ingress-operator -o jsonpath='{.status.domain}') Finalize the B2Bi install Yet Another Markup Language (YAML) file. envsubst < $PROJECT_DIR/ibm-b2bi-prod/values.yaml > b2biInstall.yaml Run the helm chart to install the B2Bi containers in OpenShift. helm install sterling-fg $PROJECT_DIR/ibm-b2bi-prod --timeout 120m0s --namespace ${PROJECT_NAME} --values b2biInstall.yaml --debug This will take approximately 60 minutes This command will take approximately 60 minutes to complete. Learn an interesting detail about IBM Cloud Shell while you wait... IBM Cloud Shell is a very useful tool when working with IBM Cloud command line interfaces as well as other Cloud-related tools like Red Hat OpenShift, kubernetes, helm, etc. as many of these tools are preinstalled and alleviate the need to install tools on personal workstations. However, IBM Cloud Shell has some limitations that you can read about here . One additional limitation not listed in the above doc is that IBM Cloud Shell will kill long running processes running in scripts (e.g. bash scripts). This issue was encountered while creating these installation scripts. Originally, steps 37 through 39 above were contained in the deploy_b2bi.sh script. However, when executed, the deploy_b2bi.sh script would get killed (which in turn killed helm) after running approximately 20 minutes. By pulling the helm command out of the script and running it directly in the initial shell process, helm is able to complete the install of the B2Bi containers. Example output ... Long output - truncated in this example ... NAME: sterling-fg LAST DEPLOYED: Wed Oct 19 17:11:30 2022 NAMESPACE: b2bi STATUS: deployed REVISION: 1 NOTES: Please wait while the application is getting deployed. Run the below command to check the status of application server replica sets. At least 1 replica must be in 'READY' state. kubectl get replicasets -l release=sterling-fg -n b2bi Run the below command to check the status of the application server pods for the release. kubectl get pods -l release=sterling-fg -n b2bi -o wide To view the logs for a pod, run the below command. kubectl logs <pod name> -n b2bi Access the application by running the following url That concludes the setup of the environment. Proceed to the next part of the demonstration guide to configure B2Bi.","title":"Environment Preparation and B2Bi Installation using IBM Cloud Shell"},{"location":"DemoPreparation-CloudShell/#accept-invitation-to-join-the-itz-ibm-cloud-account-for-the-custom-roks-reservation","text":"Open the You are invited to join an account in IBM Cloud email received from IBM Cloud and click the Join now link. In the browser window that opens, click the Join Account button. Follow the steps to login to IBM Cloud. On the IBM Cloud Dashboard set the current account to 2112072 - ITZ - V2 . Not seeing 2112072 - ITZ - V2? It is possible ITZ provisioned the OpenShift cluster in a different IBM Cloud account. Select the account specified in the ITZ reservation.","title":"Accept invitation to join the ITZ IBM Cloud account for the Custom ROKS reservation"},{"location":"DemoPreparation-CloudShell/#access-the-openshift-web-console","text":"Click the OpenShift icon in the left-hand menu bar. Click Clusters . Click the OpenShift cluster name in the table. Note: the cluster name will be different than seen in the above image. Click the OpenShift web console button. At this time, a page like the one below should open in a new browser window or tab. Leave this browser window open. It will be used again later.","title":"Access the OpenShift web console"},{"location":"DemoPreparation-CloudShell/#retrieve-the-b2bi-installation-scripts","text":"In this part of the demonstration, you will use the IBM Cloud Shell. If you are not familiar with IBM Cloud Shell, you can learn about it here . Tip Use the copy capability of the demonstration guide to copy and paste commands to the IBM Cloud Command Shell to avoid typing errors. In the IBM Cloud Portal, with the demonstration account selected ( 2112072 - ITZ - V2 ), click the IBM Cloud Shell icon. The IBM Cloud Shell will open in a new browser tab or window. It may take a few seconds for the shell to initialize. Create a new directory for the B2Bi installation scripts. mkdir b2bi Set the PROJECT_DIR environment variable. export PROJECT_DIR=$HOME/b2bi Change directories to PROJECT_DIR . cd $PROJECT_DIR Download the B2Bi installation script. wget -O rapid-lab-b2bi-newdb-61051.zip https://github.com/IBM/SalesEnablement-SterlingDataExchange-L3/blob/main/tools/rapid-lab-b2bi-newdb-61051-CloudShell.zip?raw=true Example output --2022-10-18 20:12:56-- https://github.com/IBM/SalesEnablement-SterlingDataExchange-L3/blob/main/tools/rapid-lab-b2bi-newdb-61051.zip?raw=true Resolving github.com (github.com)... 140.82.113.4 Connecting to github.com (github.com)|140.82.113.4|:443... connected. HTTP request sent, awaiting response... 302 Found Location: https://github.com/IBM/SalesEnablement-SterlingDataExchange-L3/raw/main/tools/rapid-lab-b2bi-newdb-61051.zip [following] --2022-10-18 20:12:56-- https://github.com/IBM/SalesEnablement-SterlingDataExchange-L3/raw/main/tools/rapid-lab-b2bi-newdb-61051.zip Reusing existing connection to github.com:443. HTTP request sent, awaiting response... 302 Found Location: https://raw.githubusercontent.com/IBM/SalesEnablement-SterlingDataExchange-L3/main/tools/rapid-lab-b2bi-newdb-61051.zip [following] --2022-10-18 20:12:57-- https://raw.githubusercontent.com/IBM/SalesEnablement-SterlingDataExchange-L3/main/tools/rapid-lab-b2bi-newdb-61051.zip Resolving raw.githubusercontent.com (raw.githubusercontent.com)... 185.199.110.133, 185.199.111.133, 185.199.108.133, ... Connecting to raw.githubusercontent.com (raw.githubusercontent.com)|185.199.110.133|:443... connected. HTTP request sent, awaiting response... 200 OK Length: 4061226 (3.9M) [application/zip] Saving to: \u2018rapid-lab-b2bi-newlab-61051.zip\u2019 rapid-lab-b2bi-newlab-61051.zip 100%[=========================================================================================================================================>] 3.87M --.-KB/s in 0.03s 2022-10-18 20:12:57 (147 MB/s) - \u2018rapid-lab-b2bi-newlab-61051.zip\u2019 saved [4061226/4061226] Unzip the installation script. unzip rapid-lab-b2bi-newdb-61051-CloudShell.zip Example output Archive: rapid-lab-b2bi-newdb-61051-CloudShell.zip inflating: deploy_mq.sh inflating: edited-values.yaml inflating: prepare_db2.sh inflating: deploy_db2.sh inflating: README.md inflating: COPYING inflating: env.sh inflating: deploy_b2bi.sh inflating: db2jcc4.jar","title":"Retrieve the B2Bi installation scripts"},{"location":"DemoPreparation-CloudShell/#authenticate-to-the-openshift-cluster","text":"For the next steps, the OpenShift login command to authenticate to the OpenShift cluster must be retrieved an executed. Switch to the OpenShift web console browser window or tab. Click the IAM identity drop-down menu at top left of the OpenShift web console and click the Copy login command option. Click the Display Token link. Copy and paste the string in the Log in with this token field. Switch back to the IBM Cloud Shell browser window or tab from earlier. Paste the oc login command line copied in step 29 into the IBM Cloud Shell window and press enter. Example output itzuser@itz-2700039nft-srv4:~/b2bi$ oc login --token=sha256~XXXXXXXXXXXXXXXXXX --server=https://c103-e.us-south.containers.cloud.ibm.com:31501 Logged into \"https://c103-e.us-south.containers.cloud.ibm.com:31501\" as \"IAM#andrew@jones-tx.com\" using the token provided. You have access to 66 projects, the list has been suppressed. You can list all projects with 'oc projects' Using project \"default\". Welcome! See 'oc help' to get started. itzuser@itz-2700039nft-srv4:~/b2bi$","title":"Authenticate to the OpenShift cluster"},{"location":"DemoPreparation-CloudShell/#install-db2-in-the-openshift-cluster","text":"Run the environment setup and DB2 deploy scripts. . env.sh ; ./deploy_db2.sh Example output Now using project \"db2\" on server \"https://c109-e.us-east.containers.cloud.ibm.com:30720\". You can add applications to this project with the 'new-app' command. For example, try: oc new-app rails-postgresql-example to build a new example application in Ruby. Or use kubectl to deploy a simple Kubernetes application: kubectl create deployment hello-node --image=k8s.gcr.io/e2e-test-images/agnhost:2.33 -- /agnhost serve-hostname serviceaccount/db2 created clusterrole.rbac.authorization.k8s.io/system:openshift:scc:privileged added: \"db2\" secret/db2-secret created service/db2-ci created service/db2-lb created statefulset.apps/db2 created Wait 5 minutes... Wait approximately 5 minutes for the DB2 containers to start loading in OpenShift before executing the next step. Optional: monitor events in OpenShift web console Use the OpenShift web console to monitor the DB2 project events and pod creation. Verify DB2 is up and running in the OpenShift cluster. oc logs -f ${DB2_NAME}-0 Failure If no output is seen from the above command, or if it returns the following message: Error from server (BadRequest): container \"db2\" in pod \"db2-0\" is waiting to start: ContainerCreating wait and rerun oc logs -f ${DB2_NAME}-0 until the output starts steaming as shown in the example output below. Example output (*) Previous setup has not been detected. Creating the users... (*) Creating users ... (*) Creating instance ... DB2 installation is being initialized. Total number of tasks to be performed: 4 Total estimated time for all tasks to be performed: 309 second(s) Task #1 start Description: Setting default global profile registry variables Task #1 end Task #2 start Description: Initializing instance list Estimated time 5 second(s) Task #2 end Task #3 start Description: Configuring DB2 instances Estimated time 300 second(s) Task #3 end Task #4 start Description: Updating global profile registry Estimated time 3 second(s) Task #4 end ... **Long output - truncated in this example** ... 2022-10-18-16.44.43.180954+000 I33681E386 LEVEL: Warning PID : 15858 TID : 139996146354048 PROC : db2start INSTANCE: db2inst1 NODE : 000 HOSTNAME: db2-0 FUNCTION: DB2 UDB, base sys utilities, sqleReleaseStStLockFile, probe:16078 MESSAGE : Released lock on the file: DATA #1 : String, 50 bytes /database/config/db2inst1/sqllib/ctrl/db2strst.lck Do not proceed until... Do not proceed to the next step until the following line appears in the output: /database/config/db2inst1/sqllib/ctrl/db2strst.lck Stop the oc logs command by entering Ctrl +c on the keyboard. Example output ... FUNCTION: DB2 UDB, base sys utilities, sqleReleaseStStLockFile, probe:16078 MESSAGE : Released lock on the file: DATA #1 : String, 50 bytes /database/config/db2inst1/sqllib/ctrl/db2strst.lck ^C itzuser@itz-2700039nft-srv4:~/b2bi$","title":"Install DB2 in the OpenShift cluster"},{"location":"DemoPreparation-CloudShell/#configure-db2-and-created-the-required-b2bi-tables","text":"Prepare the DB2 instance running in OpenShift. ./prepare_db2.sh This script does not generate output. Remotely connect to the DB2 container running in OpenShift. oc rsh pod/${DB2_NAME}-0 su - db2inst1 Example output Last login: Tue Oct 18 20:47:33 UTC 2022 [db2inst1@db2-0 ~]$ A remote connection is now open to the DB2 container running in OpenShift as shown by the change in the command prompt to: [db2inst1@db2-0 ~]$ Run the db2reg.sh script. ./db2reg.sh Example output DB20000I The UPDATE DATABASE MANAGER CONFIGURATION command completed successfully. DB20000I The UPDATE DATABASE MANAGER CONFIGURATION command completed successfully. DB20000I The UPDATE DATABASE MANAGER CONFIGURATION command completed successfully. DB20000I The UPDATE DATABASE MANAGER CONFIGURATION command completed successfully. DB20000I The UPDATE DATABASE MANAGER CONFIGURATION command completed successfully. DB20000I The UPDATE DATABASE MANAGER CONFIGURATION command completed successfully. DB20000I The UPDATE DATABASE MANAGER CONFIGURATION command completed successfully. DB20000I The UPDATE DATABASE MANAGER CONFIGURATION command completed successfully. Create the B2Bi tables in DB2. db2 -stvf create_scc_db_b2bidb.sql This will take ~5 minutes This command will take approximately 5 minutes to complete. Example output CREATE DATABASE B2BIDB AUTOMATIC STORAGE YES USING CODESET UTF-8 TERRITORY US COLLATE USING IDENTITY PAGESIZE 4096 DFT_EXTENT_SZ 32 DB20000I The CREATE DATABASE command completed successfully. CONNECT TO B2BIDB Database Connection Information Database server = DB2/LINUXX8664 11.5.5.1 SQL authorization ID = DB2INST1 Local database alias = B2BIDB UPDATE DATABASE CONFIG USING STMT_CONC LITERALS DB20000I The UPDATE DATABASE CONFIGURATION command completed successfully. ... Long output - truncated in this example ... CREATE USER TEMPORARY TABLESPACE UTEMP4KTS IN DATABASE PARTITION GROUP IBMDEFAULTGROUP PAGESIZE 4 K MANAGED BY AUTOMATIC STORAGE EXTENTSIZE 32 BUFFERPOOL UTEMP4KBP FILE SYSTEM CACHING DB20000I The SQL command completed successfully. CONNECT RESET DB20000I The SQL command completed successfully. Run the final DB2 update script. ./db2-update.sh Example output Database Connection Information Database server = DB2/LINUXX8664 11.5.5.1 SQL authorization ID = DB2INST1 Local database alias = B2BIDB DB20000I The SQL command completed successfully. DB20000I The TERMINATE command completed successfully. DB20000I The FORCE APPLICATION command completed successfully. DB21024I This command is asynchronous and may not be effective immediately. DB20000I The DEACTIVATE DATABASE command completed successfully. 10/18/2022 16:53:39 0 0 SQL1064N DB2STOP processing was successful. SQL1064N DB2STOP processing was successful. 10/18/2022 16:53:41 0 0 SQL1063N DB2START processing was successful. SQL1063N DB2START processing was successful. Exit the connection to the DB2 container in OpenShift. exit Example output logout itzuser@itz-2700039nft-srv4:~/b2bi$ Notice the command line prompt has changed back to the prompt for the VSI connection.","title":"Configure DB2 and created the required B2Bi tables"},{"location":"DemoPreparation-CloudShell/#install-mq-in-the-openshift-cluster","text":"Deploy MQ to OpenShift. ./deploy_mq.sh Example output Now using project \"mq\" on server \"https://c109-e.us-east.containers.cloud.ibm.com:30720\". You can add applications to this project with the 'new-app' command. For example, try: oc new-app rails-postgresql-example to build a new example application in Ruby. Or use kubectl to deploy a simple Kubernetes application: kubectl create deployment hello-node --image=k8s.gcr.io/e2e-test-images/agnhost:2.33 -- /agnhost serve-hostname serviceaccount/mq created clusterrole.rbac.authorization.k8s.io/system:openshift:scc:privileged added: \"mq\" service/mq-data created service/mq-web created W1018 16:54:39.757566 34060 shim_kubectl.go:58] Using non-groupfied API resources is deprecated and will be removed in a future release, update apiVersion to \"route.openshift.io/v1\" for your resource route.route.openshift.io/mq-web created secret/mq-secret created statefulset.apps/mq created","title":"Install MQ in the OpenShift cluster"},{"location":"DemoPreparation-CloudShell/#update-the-environment-variables-with-ibm-container-entitlement-key-and-e-mail-address","text":"The next steps require editing of a file using the vi editor. If you are not familiar with the vi editor, it is strongly recommend to watch the following video before proceeding. There is no audio for this video. Open the vi editor. vi env.sh Open the IBM Entitlement key page here . Note, re-authentication to ibm.com may be required. If an entitlement key does not already exist, click Add new key . Click the Copy button. Return to the IBM Cloud Shell window, use the arrow keys to move the cursor between the quotes in the export APIKEY line, press i to enter input mode, and paste the copied entitlement key between the quotes. Press the esc key to exit input mode. Arrow key down and over to between the quotes in the export EMAIL=\"\" line and enter a your e-mail address. Press the esc key to exit input mode. Enter your e-mail address between the quotes on the export EMAIL=\"\" line. Press the : key and then the x key and enter to save and exit the vi editor. Verify the env.sh file looks like the example output below. cat env.sh Example output itzuser@itz-2700039nft-srv4:~/b2bi$ cat env.sh #!/usr/bin/bash ## Locate your APIKEY (Entitlement Key For Container Software) ## here: https://myibm.ibm.com/products-services/containerlibrary ## Requires IBM ID and permission. export PROJECT_NAME=\"b2bi\" export PROJECT_DIR=\"$HOME/b2bi\" export DB2_NAME=\"db2\" export MQ_NAME=\"mq\" export APIKEY=\"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\" export EMAIL=\"andrew@jones-tx.com\" itzuser@itz-2700039nft-srv4:~/b2bi$","title":"Update the environment variables with IBM container entitlement key and e-mail address"},{"location":"DemoPreparation-CloudShell/#install-b2bi-in-the-openshift-cluster","text":"Deploy the B2Bi related containers on OpenShift. ./deploy_b2bi.sh This will take approximately 10 minutes This command will take approximately 10 minutes to complete. Optional: monitor events in the OpenShift web console Use the OpenShift web console to monitor the b2bi project events and pod creation. Example output Now using project \"b2bi\" on server \"https://c103-e.us-south.containers.cloud.ibm.com:31501\". You can add applications to this project with the 'new-app' command. For example, try: oc new-app rails-postgresql-example to build a new example application in Ruby. Or use kubectl to deploy a simple Kubernetes application: kubectl create deployment hello-node --image=k8s.gcr.io/e2e-test-images/agnhost:2.33 -- /agnhost serve-hostname persistentvolumeclaim/ibm-cloud-file-nfs-storage-pvc created clusterrole.rbac.authorization.k8s.io/system:openshift:scc:anyuid added: \"default\" deployment.apps/ibm-cloud-file-nfs-storage-pod created Defaulted container \"ibm-cloud-file-nfs-storage-pod\" out of: ibm-cloud-file-nfs-storage-pod, permissionsfix (init) ... Long output - truncated in this example ... Set environment variables for final install step. export DB2_IP=$(oc get svc db2-ci -n ${DB2_NAME} -o jsonpath='{.spec.clusterIP}') export MQ_IP=$(oc get svc mq-data -n ${MQ_NAME} -o jsonpath='{.spec.clusterIP}') export INGRESS_SUBDOMAIN=$(oc get IngressController default -n openshift-ingress-operator -o jsonpath='{.status.domain}') Finalize the B2Bi install Yet Another Markup Language (YAML) file. envsubst < $PROJECT_DIR/ibm-b2bi-prod/values.yaml > b2biInstall.yaml Run the helm chart to install the B2Bi containers in OpenShift. helm install sterling-fg $PROJECT_DIR/ibm-b2bi-prod --timeout 120m0s --namespace ${PROJECT_NAME} --values b2biInstall.yaml --debug This will take approximately 60 minutes This command will take approximately 60 minutes to complete. Learn an interesting detail about IBM Cloud Shell while you wait... IBM Cloud Shell is a very useful tool when working with IBM Cloud command line interfaces as well as other Cloud-related tools like Red Hat OpenShift, kubernetes, helm, etc. as many of these tools are preinstalled and alleviate the need to install tools on personal workstations. However, IBM Cloud Shell has some limitations that you can read about here . One additional limitation not listed in the above doc is that IBM Cloud Shell will kill long running processes running in scripts (e.g. bash scripts). This issue was encountered while creating these installation scripts. Originally, steps 37 through 39 above were contained in the deploy_b2bi.sh script. However, when executed, the deploy_b2bi.sh script would get killed (which in turn killed helm) after running approximately 20 minutes. By pulling the helm command out of the script and running it directly in the initial shell process, helm is able to complete the install of the B2Bi containers. Example output ... Long output - truncated in this example ... NAME: sterling-fg LAST DEPLOYED: Wed Oct 19 17:11:30 2022 NAMESPACE: b2bi STATUS: deployed REVISION: 1 NOTES: Please wait while the application is getting deployed. Run the below command to check the status of application server replica sets. At least 1 replica must be in 'READY' state. kubectl get replicasets -l release=sterling-fg -n b2bi Run the below command to check the status of the application server pods for the release. kubectl get pods -l release=sterling-fg -n b2bi -o wide To view the logs for a pod, run the below command. kubectl logs <pod name> -n b2bi Access the application by running the following url That concludes the setup of the environment. Proceed to the next part of the demonstration guide to configure B2Bi.","title":"Install B2Bi in the OpenShift cluster"},{"location":"DemoPreparation-VSI/","text":"This demonstration requires two IBM Technology Zone (ITZ) environments: - Custom ROKS requests: https://techzone.ibm.com/collection/custom-roks-vmware-requests - IBM Cloud VSI (Classic): https://techzone.ibm.com/collection/base-images At this point, all users should have completed the steps in the IBM Sterling Data Exchange Level 3 learning plan to reserve the two environments as described in the IBM Sterling Data Exchange Level 3 Introduction video . Before proceeding, validate that both the reservations have been fully provisioned and are in the Ready state in ITZ. If not, please complete those steps before proceeding. The following steps must be performed before delivering the demonstration. These steps should be performed well in advance of starting an actual client demonstration as it will take approximately 1 hour for all steps to complete. Accept invitation to join the ITZ IBM Cloud account for the Custom ROKS reservation Open the You are invited to join an account in IBM Cloud email received from IBM Cloud and click the Join now link. In the browser window that opens, click the Join Account button. Follow the steps to login to IBM Cloud. On the IBM Cloud Dashboard set the current account to 2112072 - ITZ - V2 . Not seeing 2112072 - ITZ - V2? It is possible ITZ provisioned the OpenShift cluster in a different IBM Cloud account. Select the account specified in the ITZ reservation. Click the OpenShift icon in the left-hand menu bar. Click Clusters . Click the OpenShift cluster name in the table. Note: the cluster name will be different than seen in the above image. Click the OpenShift web console button. At this time, a page like the one below should be in a new browser window or tab. Leave this window open. It will be used again later. Download the SSH key from the IBM Cloud VSI (Classic) reservations Open a new browser window or tab to the ITZ My reservations page. Click on the IBM Cloud VSI (Classic) reservation tile. Click the Download SSH Key button. Take note Take note of the Public IP , SSH Port , and Username fields in the reservation. These values will be needed later. By default, most browsers will utilize the default Downloads directory in the users home directory. Connect to the Virtual Server Instance (VSI) The next step must be performed on the users local computer. The directions below are specific to users with a Mac computer (MacOS). All instructions listed here should be the same for users running on Linux machines. For Windows machines users. Windows users will need to utilize a ssh client such as putty. XXXXXXX Open a terminal on local desktop computer using Mac Spotlight (press the command key and the space bar). Enter the following command to change to the Downloads directory where the ITZ private key was downloaded. cd Downloads Verify the SSH key file is found in the Downloads directory. ls -l pem_ibmcloudvsi_download.pem Example output -rw-r--r--@ 1 andrewjones staff 3243 Oct 18 13:12 pem_ibmcloudvsi_download.pem No such file or directory? If the file was not found, verify the default download directory of the browser used in step 11 above and try again adjusting for correct download directory. It is also possible the SSH key file name was not saved as pem_ibmcloudvsi_download.pem. Check the Downloads directory for the most recent file names. Change the permissions of the SSH key file. chmod 0600 pem_ibmcloudvsi_download.pem Verify the SSH key file has the proper permissions. ls -l pem_ibmcloudvsi_download.pem Example output -rw-------@ 1 andrewjones staff 3243 Oct 18 13:12 pem_ibmcloudvsi_download.pem Use ssh to connect to the remote VSI and enter yes when prompted to continue. Warning Substitute the strings PORT, USER, and PUBLICIP with the values in the VSI reservation as illustrated in the image in step 11 above. ssh -i pem_ibmcloudvsi_download.pem -p SSHPORT USERNAME@PUBLICIP Example output MacBook-Pro-2:Downloads andrewjones$ ssh -i pem_ibmcloudvsi_download.pem -p 2223 itzuser@169.59.6.211 The authenticity of host '[169.59.6.211]:2223 ([169.59.6.211]:2223)' can't be established. ED25519 key fingerprint is SHA256:YAN8U3PtpCzdhqc67F8ZQWlJjQgBV0DOi7LvZgDEtws. This key is not known by any other names Are you sure you want to continue connecting (yes/no/[fingerprint])? yes Warning: Permanently added '[169.59.6.211]:2223' (ED25519) to the list of known hosts. Welcome to Ubuntu 20.04.4 LTS (GNU/Linux 5.4.0-124-generic x86_64) ... **Long output - truncated in this example** ... To run a command as administrator (user \"root\"), use \"sudo \". See \"man sudo_root\" for details. Install all required IBM Cloud and other tools Use the following command to install all required tools. bash <(curl -sL https://ibm.biz/ocp-cli) Example output Updating the operating system. Wait! Installing Docker. Wait! Adding user to docker group. Wait! Setting up docker to start at reboot. Wait! Installing common utilities. Wait! Installing ibmcloud utility. Wait! Installing Helm. Wait! Installing OpenShift oc utility. Wait! Installing Kubernetes kubectl. Wait! cleaning up. Wait! All done. Client Version: 4.10.0 version.BuildInfo{Version:\"v3.10.1\", GitCommit:\"9f88ccb6aee40b9a0535fcc7efea6055e1ef72c9\", GitTreeState:\"clean\", GoVersion:\"go1.18.7\"} Flag --short has been deprecated, and will be removed in the future. The --short output will become the default. Client Version: v1.25.3 Kustomize Version: v4.5.7 ibmcloud version 2.11.1+c18277d-2022-09-23T21:49:24+00:00 Reboot your instance now: sudo shutdown -r now If the reboot message is not seen If the reboot message is not seen in the output of the previous command a problem occurred. Re-run the last command. When doing so, ignore error messages about items already installed. Restart the VSI. sudo shutdown -r now Example output Connection to PUBLICIP closed by remote host. Connection to PUBLICIP closed. Note, it will take a few minutes for the VSI to reboot. Wait 2 or 3 minutes and then continue the steps below. Download the B2Bi installation scripts Use ssh to re-connect to the remote VSI. Warning Substitute the strings PORT, USER, and PUBLICIP with the values in the VSI reservation as illustrated in the image in step 11 above. ssh -i pem-ibmcloudvsi-download.pem -p SSHPORT USERNAME@PUBLICIP Example output MacBook-Pro-2:Downloads andrewjones$ ssh -i pem_ibmcloudvsi_download.pem -p 2223 itzuser@169.59.6.211 Welcome to Ubuntu 20.04.5 LTS (GNU/Linux 5.4.0-124-generic x86_64) Documentation: https://help.ubuntu.com Management: https://landscape.canonical.com Support: https://ubuntu.com/advantage System information as of Tue Oct 18 19:58:23 UTC 2022 System load: 0.65 Users logged in: 0 Usage of /: 3.0% of 97.26GB IPv4 address for docker0: 172.17.0.1 Memory usage: 7% IPv4 address for eth0: 10.36.166.233 Swap usage: 0% IPv4 address for eth1: 169.59.6.211 Processes: 123 8 updates can be applied immediately. 8 of these updates are standard security updates. To see these additional updates run: apt list --upgradable New release '22.04.1 LTS' available. Run 'do-release-upgrade' to upgrade to it. Last login: Tue Oct 18 19:47:57 2022 from 70.114.143.247 Create a new directory B2Bi installation scripts. mkdir b2bi Set the PROJECT_DIR environment variable. export PROJECT_DIR=$HOME/b2bi Change directories to PROJECT_DIR . cd $PROJECT_DIR Download the B2Bi installation script. wget -O rapid-lab-b2bi-newdb-61051.zip https://github.com/IBM/SalesEnablement-SterlingDataExchange-L3/blob/main/tools/rapid-lab-b2bi-newdb-61051.zip?raw=true Example output --2022-10-18 20:12:56-- https://github.com/IBM/SalesEnablement-SterlingDataExchange-L3/blob/main/tools/rapid-lab-b2bi-newdb-61051.zip?raw=true Resolving github.com (github.com)... 140.82.113.4 Connecting to github.com (github.com)|140.82.113.4|:443... connected. HTTP request sent, awaiting response... 302 Found Location: https://github.com/IBM/SalesEnablement-SterlingDataExchange-L3/raw/main/tools/rapid-lab-b2bi-newdb-61051.zip [following] --2022-10-18 20:12:56-- https://github.com/IBM/SalesEnablement-SterlingDataExchange-L3/raw/main/tools/rapid-lab-b2bi-newdb-61051.zip Reusing existing connection to github.com:443. HTTP request sent, awaiting response... 302 Found Location: https://raw.githubusercontent.com/IBM/SalesEnablement-SterlingDataExchange-L3/main/tools/rapid-lab-b2bi-newdb-61051.zip [following] --2022-10-18 20:12:57-- https://raw.githubusercontent.com/IBM/SalesEnablement-SterlingDataExchange-L3/main/tools/rapid-lab-b2bi-newdb-61051.zip Resolving raw.githubusercontent.com (raw.githubusercontent.com)... 185.199.110.133, 185.199.111.133, 185.199.108.133, ... Connecting to raw.githubusercontent.com (raw.githubusercontent.com)|185.199.110.133|:443... connected. HTTP request sent, awaiting response... 200 OK Length: 4061226 (3.9M) [application/zip] Saving to: \u2018rapid-lab-b2bi-newlab-61051.zip\u2019 rapid-lab-b2bi-newlab-61051.zip 100%[=========================================================================================================================================>] 3.87M --.-KB/s in 0.03s 2022-10-18 20:12:57 (147 MB/s) - \u2018rapid-lab-b2bi-newlab-61051.zip\u2019 saved [4061226/4061226] Unzip the installation script. unzip rapid-lab-b2bi-newdb-61051.zip Example output Archive: rapid-lab-b2bi-newdb-61051.zip inflating: deploy_mq.sh inflating: edited-values.yaml inflating: prepare_db2.sh inflating: deploy_db2.sh inflating: README.md inflating: COPYING inflating: env.sh inflating: deploy_b2bi.sh inflating: db2jcc4.jar Authenticate to the OpenShift cluster For the next steps, the OpenShift login command to authenticate to the cluster in the ITZ reservation must be retrieved an executed. Switch to the OpenShift web console browser window or tab. Click the IAM identity drop-down menu at top left of the OpenShift web console and click the Copy Login Command option. Click the Display token link. Copy and paste the string in the Log in with this token field. Switch to the SSH terminal window from earlier. Paste the oc login command line copied in step 29 into the terminal window and press enter. Example output itzuser@itz-2700039nft-srv4:~/b2bi$ oc login --token=sha256~XXXXXXXXXXXXXXXXXX --server=https://c103-e.us-south.containers.cloud.ibm.com:31501 Logged into \"https://c103-e.us-south.containers.cloud.ibm.com:31501\" as \"IAM#andrew@jones-tx.com\" using the token provided. You have access to 66 projects, the list has been suppressed. You can list all projects with 'oc projects' Using project \"default\". Welcome! See 'oc help' to get started. itzuser@itz-2700039nft-srv4:~/b2bi$ Run the environment setup and DB2 deploy scripts. . env.sh ; ./deploy_db2.sh Example output Now using project \"db2\" on server \"https://c109-e.us-east.containers.cloud.ibm.com:30720\". You can add applications to this project with the 'new-app' command. For example, try: oc new-app rails-postgresql-example to build a new example application in Ruby. Or use kubectl to deploy a simple Kubernetes application: kubectl create deployment hello-node --image=k8s.gcr.io/e2e-test-images/agnhost:2.33 -- /agnhost serve-hostname serviceaccount/db2 created clusterrole.rbac.authorization.k8s.io/system:openshift:scc:privileged added: \"db2\" secret/db2-secret created service/db2-ci created service/db2-lb created statefulset.apps/db2 created Wait 5 minutes... Wait approximately 5 minutes for the DB2 containers to start loading in OpenShift before executing the next step. Monitor events in OpenShift web console Use the OpenShift web console to monitor the DB2 project events and pod creation. Verify DB2 is up and running in the OpenShift cluster. oc logs -f ${DB2_NAME}-0 Failure If no output is seen from the above command, or if it returns the message: Error from server (BadRequest): container \"db2\" in pod \"db2-0\" is waiting to start: ContainerCreating wait and rerun oc logs -f ${DB2_NAME}-0 until the output starts steaming as shown in the example output below. Example output (*) Previous setup has not been detected. Creating the users... (*) Creating users ... (*) Creating instance ... DB2 installation is being initialized. Total number of tasks to be performed: 4 Total estimated time for all tasks to be performed: 309 second(s) Task #1 start Description: Setting default global profile registry variables Task #1 end Task #2 start Description: Initializing instance list Estimated time 5 second(s) Task #2 end Task #3 start Description: Configuring DB2 instances Estimated time 300 second(s) Task #3 end Task #4 start Description: Updating global profile registry Estimated time 3 second(s) Task #4 end ... **Long output - truncated in this example** ... 2022-10-18-16.44.43.180954+000 I33681E386 LEVEL: Warning PID : 15858 TID : 139996146354048 PROC : db2start INSTANCE: db2inst1 NODE : 000 HOSTNAME: db2-0 FUNCTION: DB2 UDB, base sys utilities, sqleReleaseStStLockFile, probe:16078 MESSAGE : Released lock on the file: DATA #1 : String, 50 bytes /database/config/db2inst1/sqllib/ctrl/db2strst.lck Do not proceed until... Do not proceed to the next step until the following line appears in the output: /database/config/db2inst1/sqllib/ctrl/db2strst.lck Stop the oc logs command by entering Ctrl +c on the keyboard. Example output ... FUNCTION: DB2 UDB, base sys utilities, sqleReleaseStStLockFile, probe:16078 MESSAGE : Released lock on the file: DATA #1 : String, 50 bytes /database/config/db2inst1/sqllib/ctrl/db2strst.lck ^C itzuser@itz-2700039nft-srv4:~/b2bi$ Prepare the DB2 instance running in OpenShift. ./prepare_db2.sh Note, this script does not generate output. Remotely connect to the DB2 container running in OpenShift. oc rsh pod/${DB2_NAME}-0 su - db2inst1 Example output Last login: Tue Oct 18 20:47:33 UTC 2022 [db2inst1@db2-0 ~]$ Note, a remote connection is now open to the DB2 container running in OpenShift as shown by the change in the command prompt to: [db2inst1@db2-0 ~]$ Run the db2reg.sh script. ./db2reg.sh Example output DB20000I The UPDATE DATABASE MANAGER CONFIGURATION command completed successfully. DB20000I The UPDATE DATABASE MANAGER CONFIGURATION command completed successfully. DB20000I The UPDATE DATABASE MANAGER CONFIGURATION command completed successfully. DB20000I The UPDATE DATABASE MANAGER CONFIGURATION command completed successfully. DB20000I The UPDATE DATABASE MANAGER CONFIGURATION command completed successfully. DB20000I The UPDATE DATABASE MANAGER CONFIGURATION command completed successfully. DB20000I The UPDATE DATABASE MANAGER CONFIGURATION command completed successfully. DB20000I The UPDATE DATABASE MANAGER CONFIGURATION command completed successfully. Create the B2Bi tables in DB2. db2 -stvf create_scc_db_b2bidb.sql This will take ~5 minutes This command will take approximately 5 minutes to complete. Example output CREATE DATABASE B2BIDB AUTOMATIC STORAGE YES USING CODESET UTF-8 TERRITORY US COLLATE USING IDENTITY PAGESIZE 4096 DFT_EXTENT_SZ 32 DB20000I The CREATE DATABASE command completed successfully. CONNECT TO B2BIDB Database Connection Information Database server = DB2/LINUXX8664 11.5.5.1 SQL authorization ID = DB2INST1 Local database alias = B2BIDB UPDATE DATABASE CONFIG USING STMT_CONC LITERALS DB20000I The UPDATE DATABASE CONFIGURATION command completed successfully. ... Long output - truncated in this example ... CREATE USER TEMPORARY TABLESPACE UTEMP4KTS IN DATABASE PARTITION GROUP IBMDEFAULTGROUP PAGESIZE 4 K MANAGED BY AUTOMATIC STORAGE EXTENTSIZE 32 BUFFERPOOL UTEMP4KBP FILE SYSTEM CACHING DB20000I The SQL command completed successfully. CONNECT RESET DB20000I The SQL command completed successfully. Run the final DB2 update script. ./db2-update.sh Example output Database Connection Information Database server = DB2/LINUXX8664 11.5.5.1 SQL authorization ID = DB2INST1 Local database alias = B2BIDB DB20000I The SQL command completed successfully. DB20000I The TERMINATE command completed successfully. DB20000I The FORCE APPLICATION command completed successfully. DB21024I This command is asynchronous and may not be effective immediately. DB20000I The DEACTIVATE DATABASE command completed successfully. 10/18/2022 16:53:39 0 0 SQL1064N DB2STOP processing was successful. SQL1064N DB2STOP processing was successful. 10/18/2022 16:53:41 0 0 SQL1063N DB2START processing was successful. SQL1063N DB2START processing was successful. Exit the connection to the DB2 container in OpenShift. exit Example output logout itzuser@itz-2700039nft-srv4:~/b2bi$ Notice the command line prompt has changed back to the prompt for the VSI connection. Deploy MQ to OpenShift. ./deploy_mq.sh Example output Now using project \"mq\" on server \"https://c109-e.us-east.containers.cloud.ibm.com:30720\". You can add applications to this project with the 'new-app' command. For example, try: oc new-app rails-postgresql-example to build a new example application in Ruby. Or use kubectl to deploy a simple Kubernetes application: kubectl create deployment hello-node --image=k8s.gcr.io/e2e-test-images/agnhost:2.33 -- /agnhost serve-hostname serviceaccount/mq created clusterrole.rbac.authorization.k8s.io/system:openshift:scc:privileged added: \"mq\" service/mq-data created service/mq-web created W1018 16:54:39.757566 34060 shim_kubectl.go:58] Using non-groupfied API resources is deprecated and will be removed in a future release, update apiVersion to \"route.openshift.io/v1\" for your resource route.route.openshift.io/mq-web created secret/mq-secret created statefulset.apps/mq created Important Note, the next steps require editing of a file using the vi editor on the VSI. If you are not familiar with the vi editor, it is strongly recommend to watch the following video before proceeding. There is no audio for this video. Open the vi editor. vi env.sh Open the IBM Entitlement key page here . Note, re-authentication to ibm.com may be required. If an entitlement key does not already exist, click Add new key . Click the Copy button. Return to the terminal and paste the copied entitlement key between the quotes on the export APIKEY=\"\" line. Enter your e-mail address between the quotes on the export EMAIL=\"\" line. Verify the env.sh file looks like the example output below. cat env.sh Example output itzuser@itz-2700039nft-srv4:~/b2bi$ cat env.sh #!/usr/bin/bash ## Locate your APIKEY (Entitlement Key For Container Software) ## here: https://myibm.ibm.com/products-services/containerlibrary ## Requires IBM ID and permission. export PROJECT_NAME=\"b2bi\" export PROJECT_DIR=\"$HOME/b2bi\" export DB2_NAME=\"db2\" export MQ_NAME=\"mq\" export APIKEY=\"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\" export EMAIL=\"andrew@jones-tx.com\" itzuser@itz-2700039nft-srv4:~/b2bi$ Deploy the B2Bi containers on OpenShift. ./deploy_b2bi.sh This will take approximately 60 minutes This command will take approximately 60 minutes to complete. Monitor events in OpenShift web console Use the OpenShift web console to monitor the b2bi project events and pod creation. Example output Now using project \"b2bi\" on server \"https://c103-e.us-south.containers.cloud.ibm.com:31501\". You can add applications to this project with the 'new-app' command. For example, try: oc new-app rails-postgresql-example to build a new example application in Ruby. Or use kubectl to deploy a simple Kubernetes application: kubectl create deployment hello-node --image=k8s.gcr.io/e2e-test-images/agnhost:2.33 -- /agnhost serve-hostname persistentvolumeclaim/ibm-cloud-file-nfs-storage-pvc created clusterrole.rbac.authorization.k8s.io/system:openshift:scc:anyuid added: \"default\" deployment.apps/ibm-cloud-file-nfs-storage-pod created Defaulted container \"ibm-cloud-file-nfs-storage-pod\" out of: ibm-cloud-file-nfs-storage-pod, permissionsfix (init) ... Long output - truncated in this example ... NAME: sterling-fg LAST DEPLOYED: Wed Oct 19 17:11:30 2022 NAMESPACE: b2bi STATUS: deployed REVISION: 1 NOTES: Please wait while the application is getting deployed. Run the below command to check the status of application server replica sets. At least 1 replica must be in 'READY' state. kubectl get replicasets -l release=sterling-fg -n b2bi Run the below command to check the status of the application server pods for the release. kubectl get pods -l release=sterling-fg -n b2bi -o wide To view the logs for a pod, run the below command. kubectl logs <pod name> -n b2bi Access the application by running the following url That concludes the setup of the environment. Proceed to the next part of the demonstration guide to configure B2Bi.","title":"DemoPreparation VSI"},{"location":"DemoPreparation-VSI/#accept-invitation-to-join-the-itz-ibm-cloud-account-for-the-custom-roks-reservation","text":"Open the You are invited to join an account in IBM Cloud email received from IBM Cloud and click the Join now link. In the browser window that opens, click the Join Account button. Follow the steps to login to IBM Cloud. On the IBM Cloud Dashboard set the current account to 2112072 - ITZ - V2 . Not seeing 2112072 - ITZ - V2? It is possible ITZ provisioned the OpenShift cluster in a different IBM Cloud account. Select the account specified in the ITZ reservation. Click the OpenShift icon in the left-hand menu bar. Click Clusters . Click the OpenShift cluster name in the table. Note: the cluster name will be different than seen in the above image. Click the OpenShift web console button. At this time, a page like the one below should be in a new browser window or tab. Leave this window open. It will be used again later.","title":"Accept invitation to join the ITZ IBM Cloud account for the Custom ROKS reservation"},{"location":"DemoPreparation-VSI/#download-the-ssh-key-from-the-ibm-cloud-vsi-classic-reservations","text":"Open a new browser window or tab to the ITZ My reservations page. Click on the IBM Cloud VSI (Classic) reservation tile. Click the Download SSH Key button. Take note Take note of the Public IP , SSH Port , and Username fields in the reservation. These values will be needed later. By default, most browsers will utilize the default Downloads directory in the users home directory.","title":"Download the SSH key from the IBM Cloud VSI (Classic) reservations"},{"location":"DemoPreparation-VSI/#connect-to-the-virtual-server-instance-vsi","text":"The next step must be performed on the users local computer. The directions below are specific to users with a Mac computer (MacOS). All instructions listed here should be the same for users running on Linux machines. For Windows machines users. Windows users will need to utilize a ssh client such as putty. XXXXXXX Open a terminal on local desktop computer using Mac Spotlight (press the command key and the space bar). Enter the following command to change to the Downloads directory where the ITZ private key was downloaded. cd Downloads Verify the SSH key file is found in the Downloads directory. ls -l pem_ibmcloudvsi_download.pem Example output -rw-r--r--@ 1 andrewjones staff 3243 Oct 18 13:12 pem_ibmcloudvsi_download.pem No such file or directory? If the file was not found, verify the default download directory of the browser used in step 11 above and try again adjusting for correct download directory. It is also possible the SSH key file name was not saved as pem_ibmcloudvsi_download.pem. Check the Downloads directory for the most recent file names. Change the permissions of the SSH key file. chmod 0600 pem_ibmcloudvsi_download.pem Verify the SSH key file has the proper permissions. ls -l pem_ibmcloudvsi_download.pem Example output -rw-------@ 1 andrewjones staff 3243 Oct 18 13:12 pem_ibmcloudvsi_download.pem Use ssh to connect to the remote VSI and enter yes when prompted to continue. Warning Substitute the strings PORT, USER, and PUBLICIP with the values in the VSI reservation as illustrated in the image in step 11 above. ssh -i pem_ibmcloudvsi_download.pem -p SSHPORT USERNAME@PUBLICIP Example output MacBook-Pro-2:Downloads andrewjones$ ssh -i pem_ibmcloudvsi_download.pem -p 2223 itzuser@169.59.6.211 The authenticity of host '[169.59.6.211]:2223 ([169.59.6.211]:2223)' can't be established. ED25519 key fingerprint is SHA256:YAN8U3PtpCzdhqc67F8ZQWlJjQgBV0DOi7LvZgDEtws. This key is not known by any other names Are you sure you want to continue connecting (yes/no/[fingerprint])? yes Warning: Permanently added '[169.59.6.211]:2223' (ED25519) to the list of known hosts. Welcome to Ubuntu 20.04.4 LTS (GNU/Linux 5.4.0-124-generic x86_64) ... **Long output - truncated in this example** ... To run a command as administrator (user \"root\"), use \"sudo \". See \"man sudo_root\" for details.","title":"Connect to the Virtual Server Instance (VSI)"},{"location":"DemoPreparation-VSI/#install-all-required-ibm-cloud-and-other-tools","text":"Use the following command to install all required tools. bash <(curl -sL https://ibm.biz/ocp-cli) Example output Updating the operating system. Wait! Installing Docker. Wait! Adding user to docker group. Wait! Setting up docker to start at reboot. Wait! Installing common utilities. Wait! Installing ibmcloud utility. Wait! Installing Helm. Wait! Installing OpenShift oc utility. Wait! Installing Kubernetes kubectl. Wait! cleaning up. Wait! All done. Client Version: 4.10.0 version.BuildInfo{Version:\"v3.10.1\", GitCommit:\"9f88ccb6aee40b9a0535fcc7efea6055e1ef72c9\", GitTreeState:\"clean\", GoVersion:\"go1.18.7\"} Flag --short has been deprecated, and will be removed in the future. The --short output will become the default. Client Version: v1.25.3 Kustomize Version: v4.5.7 ibmcloud version 2.11.1+c18277d-2022-09-23T21:49:24+00:00 Reboot your instance now: sudo shutdown -r now If the reboot message is not seen If the reboot message is not seen in the output of the previous command a problem occurred. Re-run the last command. When doing so, ignore error messages about items already installed. Restart the VSI. sudo shutdown -r now Example output Connection to PUBLICIP closed by remote host. Connection to PUBLICIP closed. Note, it will take a few minutes for the VSI to reboot. Wait 2 or 3 minutes and then continue the steps below.","title":"Install all required IBM Cloud and other tools"},{"location":"DemoPreparation-VSI/#download-the-b2bi-installation-scripts","text":"Use ssh to re-connect to the remote VSI. Warning Substitute the strings PORT, USER, and PUBLICIP with the values in the VSI reservation as illustrated in the image in step 11 above. ssh -i pem-ibmcloudvsi-download.pem -p SSHPORT USERNAME@PUBLICIP Example output MacBook-Pro-2:Downloads andrewjones$ ssh -i pem_ibmcloudvsi_download.pem -p 2223 itzuser@169.59.6.211 Welcome to Ubuntu 20.04.5 LTS (GNU/Linux 5.4.0-124-generic x86_64) Documentation: https://help.ubuntu.com Management: https://landscape.canonical.com Support: https://ubuntu.com/advantage System information as of Tue Oct 18 19:58:23 UTC 2022 System load: 0.65 Users logged in: 0 Usage of /: 3.0% of 97.26GB IPv4 address for docker0: 172.17.0.1 Memory usage: 7% IPv4 address for eth0: 10.36.166.233 Swap usage: 0% IPv4 address for eth1: 169.59.6.211 Processes: 123 8 updates can be applied immediately. 8 of these updates are standard security updates. To see these additional updates run: apt list --upgradable New release '22.04.1 LTS' available. Run 'do-release-upgrade' to upgrade to it. Last login: Tue Oct 18 19:47:57 2022 from 70.114.143.247 Create a new directory B2Bi installation scripts. mkdir b2bi Set the PROJECT_DIR environment variable. export PROJECT_DIR=$HOME/b2bi Change directories to PROJECT_DIR . cd $PROJECT_DIR Download the B2Bi installation script. wget -O rapid-lab-b2bi-newdb-61051.zip https://github.com/IBM/SalesEnablement-SterlingDataExchange-L3/blob/main/tools/rapid-lab-b2bi-newdb-61051.zip?raw=true Example output --2022-10-18 20:12:56-- https://github.com/IBM/SalesEnablement-SterlingDataExchange-L3/blob/main/tools/rapid-lab-b2bi-newdb-61051.zip?raw=true Resolving github.com (github.com)... 140.82.113.4 Connecting to github.com (github.com)|140.82.113.4|:443... connected. HTTP request sent, awaiting response... 302 Found Location: https://github.com/IBM/SalesEnablement-SterlingDataExchange-L3/raw/main/tools/rapid-lab-b2bi-newdb-61051.zip [following] --2022-10-18 20:12:56-- https://github.com/IBM/SalesEnablement-SterlingDataExchange-L3/raw/main/tools/rapid-lab-b2bi-newdb-61051.zip Reusing existing connection to github.com:443. HTTP request sent, awaiting response... 302 Found Location: https://raw.githubusercontent.com/IBM/SalesEnablement-SterlingDataExchange-L3/main/tools/rapid-lab-b2bi-newdb-61051.zip [following] --2022-10-18 20:12:57-- https://raw.githubusercontent.com/IBM/SalesEnablement-SterlingDataExchange-L3/main/tools/rapid-lab-b2bi-newdb-61051.zip Resolving raw.githubusercontent.com (raw.githubusercontent.com)... 185.199.110.133, 185.199.111.133, 185.199.108.133, ... Connecting to raw.githubusercontent.com (raw.githubusercontent.com)|185.199.110.133|:443... connected. HTTP request sent, awaiting response... 200 OK Length: 4061226 (3.9M) [application/zip] Saving to: \u2018rapid-lab-b2bi-newlab-61051.zip\u2019 rapid-lab-b2bi-newlab-61051.zip 100%[=========================================================================================================================================>] 3.87M --.-KB/s in 0.03s 2022-10-18 20:12:57 (147 MB/s) - \u2018rapid-lab-b2bi-newlab-61051.zip\u2019 saved [4061226/4061226] Unzip the installation script. unzip rapid-lab-b2bi-newdb-61051.zip Example output Archive: rapid-lab-b2bi-newdb-61051.zip inflating: deploy_mq.sh inflating: edited-values.yaml inflating: prepare_db2.sh inflating: deploy_db2.sh inflating: README.md inflating: COPYING inflating: env.sh inflating: deploy_b2bi.sh inflating: db2jcc4.jar","title":"Download the B2Bi installation scripts"},{"location":"DemoPreparation-VSI/#authenticate-to-the-openshift-cluster","text":"For the next steps, the OpenShift login command to authenticate to the cluster in the ITZ reservation must be retrieved an executed. Switch to the OpenShift web console browser window or tab. Click the IAM identity drop-down menu at top left of the OpenShift web console and click the Copy Login Command option. Click the Display token link. Copy and paste the string in the Log in with this token field. Switch to the SSH terminal window from earlier. Paste the oc login command line copied in step 29 into the terminal window and press enter. Example output itzuser@itz-2700039nft-srv4:~/b2bi$ oc login --token=sha256~XXXXXXXXXXXXXXXXXX --server=https://c103-e.us-south.containers.cloud.ibm.com:31501 Logged into \"https://c103-e.us-south.containers.cloud.ibm.com:31501\" as \"IAM#andrew@jones-tx.com\" using the token provided. You have access to 66 projects, the list has been suppressed. You can list all projects with 'oc projects' Using project \"default\". Welcome! See 'oc help' to get started. itzuser@itz-2700039nft-srv4:~/b2bi$ Run the environment setup and DB2 deploy scripts. . env.sh ; ./deploy_db2.sh Example output Now using project \"db2\" on server \"https://c109-e.us-east.containers.cloud.ibm.com:30720\". You can add applications to this project with the 'new-app' command. For example, try: oc new-app rails-postgresql-example to build a new example application in Ruby. Or use kubectl to deploy a simple Kubernetes application: kubectl create deployment hello-node --image=k8s.gcr.io/e2e-test-images/agnhost:2.33 -- /agnhost serve-hostname serviceaccount/db2 created clusterrole.rbac.authorization.k8s.io/system:openshift:scc:privileged added: \"db2\" secret/db2-secret created service/db2-ci created service/db2-lb created statefulset.apps/db2 created Wait 5 minutes... Wait approximately 5 minutes for the DB2 containers to start loading in OpenShift before executing the next step. Monitor events in OpenShift web console Use the OpenShift web console to monitor the DB2 project events and pod creation. Verify DB2 is up and running in the OpenShift cluster. oc logs -f ${DB2_NAME}-0 Failure If no output is seen from the above command, or if it returns the message: Error from server (BadRequest): container \"db2\" in pod \"db2-0\" is waiting to start: ContainerCreating wait and rerun oc logs -f ${DB2_NAME}-0 until the output starts steaming as shown in the example output below. Example output (*) Previous setup has not been detected. Creating the users... (*) Creating users ... (*) Creating instance ... DB2 installation is being initialized. Total number of tasks to be performed: 4 Total estimated time for all tasks to be performed: 309 second(s) Task #1 start Description: Setting default global profile registry variables Task #1 end Task #2 start Description: Initializing instance list Estimated time 5 second(s) Task #2 end Task #3 start Description: Configuring DB2 instances Estimated time 300 second(s) Task #3 end Task #4 start Description: Updating global profile registry Estimated time 3 second(s) Task #4 end ... **Long output - truncated in this example** ... 2022-10-18-16.44.43.180954+000 I33681E386 LEVEL: Warning PID : 15858 TID : 139996146354048 PROC : db2start INSTANCE: db2inst1 NODE : 000 HOSTNAME: db2-0 FUNCTION: DB2 UDB, base sys utilities, sqleReleaseStStLockFile, probe:16078 MESSAGE : Released lock on the file: DATA #1 : String, 50 bytes /database/config/db2inst1/sqllib/ctrl/db2strst.lck Do not proceed until... Do not proceed to the next step until the following line appears in the output: /database/config/db2inst1/sqllib/ctrl/db2strst.lck Stop the oc logs command by entering Ctrl +c on the keyboard. Example output ... FUNCTION: DB2 UDB, base sys utilities, sqleReleaseStStLockFile, probe:16078 MESSAGE : Released lock on the file: DATA #1 : String, 50 bytes /database/config/db2inst1/sqllib/ctrl/db2strst.lck ^C itzuser@itz-2700039nft-srv4:~/b2bi$ Prepare the DB2 instance running in OpenShift. ./prepare_db2.sh Note, this script does not generate output. Remotely connect to the DB2 container running in OpenShift. oc rsh pod/${DB2_NAME}-0 su - db2inst1 Example output Last login: Tue Oct 18 20:47:33 UTC 2022 [db2inst1@db2-0 ~]$ Note, a remote connection is now open to the DB2 container running in OpenShift as shown by the change in the command prompt to: [db2inst1@db2-0 ~]$ Run the db2reg.sh script. ./db2reg.sh Example output DB20000I The UPDATE DATABASE MANAGER CONFIGURATION command completed successfully. DB20000I The UPDATE DATABASE MANAGER CONFIGURATION command completed successfully. DB20000I The UPDATE DATABASE MANAGER CONFIGURATION command completed successfully. DB20000I The UPDATE DATABASE MANAGER CONFIGURATION command completed successfully. DB20000I The UPDATE DATABASE MANAGER CONFIGURATION command completed successfully. DB20000I The UPDATE DATABASE MANAGER CONFIGURATION command completed successfully. DB20000I The UPDATE DATABASE MANAGER CONFIGURATION command completed successfully. DB20000I The UPDATE DATABASE MANAGER CONFIGURATION command completed successfully. Create the B2Bi tables in DB2. db2 -stvf create_scc_db_b2bidb.sql This will take ~5 minutes This command will take approximately 5 minutes to complete. Example output CREATE DATABASE B2BIDB AUTOMATIC STORAGE YES USING CODESET UTF-8 TERRITORY US COLLATE USING IDENTITY PAGESIZE 4096 DFT_EXTENT_SZ 32 DB20000I The CREATE DATABASE command completed successfully. CONNECT TO B2BIDB Database Connection Information Database server = DB2/LINUXX8664 11.5.5.1 SQL authorization ID = DB2INST1 Local database alias = B2BIDB UPDATE DATABASE CONFIG USING STMT_CONC LITERALS DB20000I The UPDATE DATABASE CONFIGURATION command completed successfully. ... Long output - truncated in this example ... CREATE USER TEMPORARY TABLESPACE UTEMP4KTS IN DATABASE PARTITION GROUP IBMDEFAULTGROUP PAGESIZE 4 K MANAGED BY AUTOMATIC STORAGE EXTENTSIZE 32 BUFFERPOOL UTEMP4KBP FILE SYSTEM CACHING DB20000I The SQL command completed successfully. CONNECT RESET DB20000I The SQL command completed successfully. Run the final DB2 update script. ./db2-update.sh Example output Database Connection Information Database server = DB2/LINUXX8664 11.5.5.1 SQL authorization ID = DB2INST1 Local database alias = B2BIDB DB20000I The SQL command completed successfully. DB20000I The TERMINATE command completed successfully. DB20000I The FORCE APPLICATION command completed successfully. DB21024I This command is asynchronous and may not be effective immediately. DB20000I The DEACTIVATE DATABASE command completed successfully. 10/18/2022 16:53:39 0 0 SQL1064N DB2STOP processing was successful. SQL1064N DB2STOP processing was successful. 10/18/2022 16:53:41 0 0 SQL1063N DB2START processing was successful. SQL1063N DB2START processing was successful. Exit the connection to the DB2 container in OpenShift. exit Example output logout itzuser@itz-2700039nft-srv4:~/b2bi$ Notice the command line prompt has changed back to the prompt for the VSI connection. Deploy MQ to OpenShift. ./deploy_mq.sh Example output Now using project \"mq\" on server \"https://c109-e.us-east.containers.cloud.ibm.com:30720\". You can add applications to this project with the 'new-app' command. For example, try: oc new-app rails-postgresql-example to build a new example application in Ruby. Or use kubectl to deploy a simple Kubernetes application: kubectl create deployment hello-node --image=k8s.gcr.io/e2e-test-images/agnhost:2.33 -- /agnhost serve-hostname serviceaccount/mq created clusterrole.rbac.authorization.k8s.io/system:openshift:scc:privileged added: \"mq\" service/mq-data created service/mq-web created W1018 16:54:39.757566 34060 shim_kubectl.go:58] Using non-groupfied API resources is deprecated and will be removed in a future release, update apiVersion to \"route.openshift.io/v1\" for your resource route.route.openshift.io/mq-web created secret/mq-secret created statefulset.apps/mq created Important Note, the next steps require editing of a file using the vi editor on the VSI. If you are not familiar with the vi editor, it is strongly recommend to watch the following video before proceeding. There is no audio for this video. Open the vi editor. vi env.sh Open the IBM Entitlement key page here . Note, re-authentication to ibm.com may be required. If an entitlement key does not already exist, click Add new key . Click the Copy button. Return to the terminal and paste the copied entitlement key between the quotes on the export APIKEY=\"\" line. Enter your e-mail address between the quotes on the export EMAIL=\"\" line. Verify the env.sh file looks like the example output below. cat env.sh Example output itzuser@itz-2700039nft-srv4:~/b2bi$ cat env.sh #!/usr/bin/bash ## Locate your APIKEY (Entitlement Key For Container Software) ## here: https://myibm.ibm.com/products-services/containerlibrary ## Requires IBM ID and permission. export PROJECT_NAME=\"b2bi\" export PROJECT_DIR=\"$HOME/b2bi\" export DB2_NAME=\"db2\" export MQ_NAME=\"mq\" export APIKEY=\"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\" export EMAIL=\"andrew@jones-tx.com\" itzuser@itz-2700039nft-srv4:~/b2bi$ Deploy the B2Bi containers on OpenShift. ./deploy_b2bi.sh This will take approximately 60 minutes This command will take approximately 60 minutes to complete. Monitor events in OpenShift web console Use the OpenShift web console to monitor the b2bi project events and pod creation. Example output Now using project \"b2bi\" on server \"https://c103-e.us-south.containers.cloud.ibm.com:31501\". You can add applications to this project with the 'new-app' command. For example, try: oc new-app rails-postgresql-example to build a new example application in Ruby. Or use kubectl to deploy a simple Kubernetes application: kubectl create deployment hello-node --image=k8s.gcr.io/e2e-test-images/agnhost:2.33 -- /agnhost serve-hostname persistentvolumeclaim/ibm-cloud-file-nfs-storage-pvc created clusterrole.rbac.authorization.k8s.io/system:openshift:scc:anyuid added: \"default\" deployment.apps/ibm-cloud-file-nfs-storage-pod created Defaulted container \"ibm-cloud-file-nfs-storage-pod\" out of: ibm-cloud-file-nfs-storage-pod, permissionsfix (init) ... Long output - truncated in this example ... NAME: sterling-fg LAST DEPLOYED: Wed Oct 19 17:11:30 2022 NAMESPACE: b2bi STATUS: deployed REVISION: 1 NOTES: Please wait while the application is getting deployed. Run the below command to check the status of application server replica sets. At least 1 replica must be in 'READY' state. kubectl get replicasets -l release=sterling-fg -n b2bi Run the below command to check the status of the application server pods for the release. kubectl get pods -l release=sterling-fg -n b2bi -o wide To view the logs for a pod, run the below command. kubectl logs <pod name> -n b2bi Access the application by running the following url That concludes the setup of the environment. Proceed to the next part of the demonstration guide to configure B2Bi.","title":"Authenticate to the OpenShift cluster"},{"location":"NextSteps/","text":"This guide provided information to assist IBM and Business Partner sellers and technical sellers in installing and demonstrating IBM Sterling B2B Integrator. Links to specific B2Bi topics were provided throughout this demonstration guide. Finally, remember to complete the IBM Sterling Data Exchange Level 3 learning plan in either YourLearning (IBM employees) or learn.ibm.com (Business Partners). IBM Sales and IBM Technical sales must complete a Stand and Deliver exercise to validate their ability to demonstrate B2Bi to potential clients. Refer to the evaluation rubric in the learning plan when preparing the Stand and Deliver. Business Partners (both sellers and technical sellers) must pass the IBM Sterling Data Exchange Level 3 quiz from learn.ibm.com. Remember, take the quiz while the reservation to the TechZone environment is active. The Business Partner quiz verifies use of the demonstration environment and not general knowledge of the offering.","title":"Next Steps"},{"location":"Overview/","text":"This demonstration assumes users have at least a basic knowledge of IBM Sterling B2B Integrator. Before proceeding, it is highly encouraged that users complete the IBM Sterling Data Exchange Level 2 learning plan. The plan is accessible to IBM employees here and Business Partners here . In this demonstration script, a secure partner-to-partner data exchange solution is created using IBM Sterling Business to Business Integrator (B2Bi). More specifically, this demonstration solution uses the IBM Certified Containers for IBM Sterling B2B Integrator version of B2Bi. This version provides enterprise-grade and security-rich product editions with integrated common software services for consistent-deployment lifecycle management, including easy install and configure options, management of upgrade and roll-back, scalability, and security. Learn more about B2Bi here and access the B2Bi product documentation here . This demonstration solution uses Secure File Transfer Protocol (SFTP) to allow two partners to exchange files in a secure manner. To create this demonstration solution, the containerized version of B2Bi will be deployed to a Red Hat OpenShift on IBM Cloud (a fully managed OpenShift deployment). Learn more about Red Hat OpenShift on IBM Cloud here . This demonstration script consists of 3 installation and configuration chapters and a chapter describing a client demonstration scenario. It is now time to install B2Bi on Red Hat OpenShift on IBM Cloud (ROKS).","title":"Demonstration Overview"}]}